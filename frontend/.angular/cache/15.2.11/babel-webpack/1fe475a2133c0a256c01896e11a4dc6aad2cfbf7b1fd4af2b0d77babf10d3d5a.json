{"ast":null,"code":"import { GroupTaskStatus } from '../models/workflow';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./user.service\";\nimport * as i2 from \"./post.service\";\nimport * as i3 from \"./bucket.service\";\nimport * as i4 from \"@angular/common/http\";\nexport class WorkflowService {\n  constructor(userService, postService, bucketService, http) {\n    this.userService = userService;\n    this.postService = postService;\n    this.bucketService = bucketService;\n    this.http = http;\n  }\n  getAll(boardID) {\n    return this.http.get('workflows/boards/' + boardID).toPromise();\n  }\n  getDistribution(boardID) {\n    return this.http.get('workflows/distribution/boards/' + boardID).toPromise();\n  }\n  createDistribution(workflow) {\n    return this.http.post('workflows/distribution/', workflow).toPromise();\n  }\n  updateDistribution(workflowID, workflow) {\n    return this.http.put('workflows/distribution/' + workflowID, workflow).toPromise();\n  }\n  removeDistribution(workflowID) {\n    return this.http.delete('workflows/distribution/' + workflowID).toPromise();\n  }\n  runDistribution(workflowID) {\n    return this.http.post('workflows/distribution/' + workflowID, {}).toPromise();\n  }\n  getAIClassification(boardID) {\n    return this.http.get('workflows/ai-classification/boards/' + boardID).toPromise();\n  }\n  createAIClassification(workflow) {\n    return this.http.post('workflows/ai-classification/', workflow).toPromise();\n  }\n  updateAIClassification(workflowID, workflow) {\n    return this.http.put('workflows/ai-classification/' + workflowID, workflow).toPromise();\n  }\n  removeAIClassification(workflowID) {\n    return this.http.delete('workflows/ai-classification/' + workflowID).toPromise();\n  }\n  runAIClassification(workflowID) {\n    return this.http.post('workflows/ai-classification/' + workflowID, {}).toPromise();\n  }\n  getTask(boardID) {\n    return this.http.get('workflows/task/boards/' + boardID + '?active=false').toPromise();\n  }\n  getActiveTasks(boardID) {\n    return this.http.get('workflows/task/boards/' + boardID + '?active=true').toPromise();\n  }\n  createTask(workflow) {\n    return this.http.post('workflows/task/', workflow).toPromise();\n  }\n  updateTask(workflowID, workflow) {\n    return this.http.put('workflows/task/' + workflowID, workflow).toPromise();\n  }\n  removeTask(workflowID) {\n    return this.http.delete('workflows/task/' + workflowID).toPromise();\n  }\n  runTask(workflowID) {\n    return this.http.post('workflows/task/' + workflowID, {}).toPromise();\n  }\n  getGroupTaskByWorkflowGroup(groupID, workflowID, representation) {\n    return this.http.get(`workflows/task/${workflowID}/groupTask/group/${groupID}?representation=${representation}`).toPromise();\n  }\n  getGroupTasks(boardID, representation) {\n    var _a;\n    return this.http.get(`workflows/task/groupTask/board/${boardID}/user/${(_a = this.userService.user) === null || _a === void 0 ? void 0 : _a.userID}?representation=${representation}`).toPromise();\n  }\n  getGroupTasksByWorkflow(workflowID, representation) {\n    return this.http.get(`workflows/task/${workflowID}/groupTask?representation=${representation}`).toPromise();\n  }\n  updateGroupTask(groupTaskID, update) {\n    return this.http.post('workflows/task/groupTask/' + groupTaskID, update).toPromise();\n  }\n  updateTaskProgress(workflowID, groupTaskID, postID, delta, type) {\n    return this.http.post(`workflows/task/${workflowID}/groupTask/${groupTaskID}`, {\n      postID,\n      delta,\n      type\n    }).toPromise();\n  }\n  submitPost(groupTaskID, post) {\n    return this.http.post(`workflows/task/groupTask/${groupTaskID}/submit`, {\n      post\n    }).toPromise();\n  }\n  markGroupTaskComplete(groupTaskID) {\n    return this.http.post(`workflows/task/groupTask/${groupTaskID}/status`, {\n      status: GroupTaskStatus.COMPLETE\n    }).toPromise();\n  }\n  markGroupTaskActive(groupTaskID) {\n    return this.http.post(`workflows/task/groupTask/${groupTaskID}/status`, {\n      status: GroupTaskStatus.ACTIVE\n    }).toPromise();\n  }\n}\nWorkflowService.ɵfac = function WorkflowService_Factory(t) {\n  return new (t || WorkflowService)(i0.ɵɵinject(i1.UserService), i0.ɵɵinject(i2.PostService), i0.ɵɵinject(i3.BucketService), i0.ɵɵinject(i4.HttpClient));\n};\nWorkflowService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: WorkflowService,\n  factory: WorkflowService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["GroupTaskStatus","WorkflowService","constructor","userService","postService","bucketService","http","getAll","boardID","get","toPromise","getDistribution","createDistribution","workflow","post","updateDistribution","workflowID","put","removeDistribution","delete","runDistribution","getAIClassification","createAIClassification","updateAIClassification","removeAIClassification","runAIClassification","getTask","getActiveTasks","createTask","updateTask","removeTask","runTask","getGroupTaskByWorkflowGroup","groupID","representation","getGroupTasks","user","userID","getGroupTasksByWorkflow","updateGroupTask","groupTaskID","update","updateTaskProgress","postID","delta","type","submitPost","markGroupTaskComplete","status","COMPLETE","markGroupTaskActive","ACTIVE","factory","providedIn"],"sourceRoot":"","sources":["/Users/marieklinaeva/github/ck-board/frontend/src/app/services/workflow.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport {\n  AIClassificationWorkflow,\n  DistributionWorkflow,\n  GroupTask,\n  GroupTaskEntity,\n  GroupTaskStatus,\n  GroupTaskType,\n  TaskWorkflow,\n  Workflow,\n} from '../models/workflow';\nimport { BucketService } from './bucket.service';\nimport { PostService } from './post.service';\nimport { UserService } from './user.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WorkflowService {\n  constructor(\n    public userService: UserService,\n    public postService: PostService,\n    public bucketService: BucketService,\n    public http: HttpClient\n  ) {}\n\n  getAll(boardID: string): Promise<Workflow[]> {\n    return this.http.get<Workflow[]>('workflows/boards/' + boardID).toPromise();\n  }\n\n  getDistribution(boardID: string): Promise<Workflow[]> {\n    return this.http\n      .get<DistributionWorkflow[]>('workflows/distribution/boards/' + boardID)\n      .toPromise();\n  }\n\n  createDistribution(\n    workflow: DistributionWorkflow\n  ): Promise<DistributionWorkflow> {\n    return this.http\n      .post<DistributionWorkflow>('workflows/distribution/', workflow)\n      .toPromise();\n  }\n\n  updateDistribution(\n    workflowID: string,\n    workflow: Partial<DistributionWorkflow>\n  ): Promise<DistributionWorkflow> {\n    return this.http\n      .put<DistributionWorkflow>(\n        'workflows/distribution/' + workflowID,\n        workflow\n      )\n      .toPromise();\n  }\n\n  removeDistribution(workflowID: string): Promise<DistributionWorkflow> {\n    return this.http\n      .delete<DistributionWorkflow>('workflows/distribution/' + workflowID)\n      .toPromise();\n  }\n\n  runDistribution(workflowID: string): Promise<any> {\n    return this.http\n      .post<any>('workflows/distribution/' + workflowID, {})\n      .toPromise();\n  }\n\n  getAIClassification(boardID: string): Promise<Workflow[]> {\n    return this.http\n      .get<AIClassificationWorkflow[]>('workflows/ai-classification/boards/' + boardID)\n      .toPromise();\n  }\n\n  createAIClassification(\n    workflow: AIClassificationWorkflow\n  ): Promise<AIClassificationWorkflow> {\n    return this.http\n      .post<AIClassificationWorkflow>('workflows/ai-classification/', workflow)\n      .toPromise();\n  }\n\n  updateAIClassification(\n    workflowID: string,\n    workflow: Partial<AIClassificationWorkflow>\n  ): Promise<AIClassificationWorkflow> {\n    return this.http\n      .put<AIClassificationWorkflow>(\n        'workflows/ai-classification/' + workflowID,\n        workflow\n      )\n      .toPromise();\n  }\n\n  removeAIClassification(workflowID: string): Promise<AIClassificationWorkflow> {\n    return this.http\n      .delete<AIClassificationWorkflow>('workflows/ai-classification/' + workflowID)\n      .toPromise();\n  }\n\n  runAIClassification(workflowID: string): Promise<any> {\n    return this.http\n      .post<any>('workflows/ai-classification/' + workflowID, {})\n      .toPromise();\n  }\n\n  getTask(boardID: string): Promise<TaskWorkflow[]> {\n    return this.http\n      .get<TaskWorkflow[]>('workflows/task/boards/' + boardID + '?active=false')\n      .toPromise();\n  }\n\n  getActiveTasks(boardID: string): Promise<TaskWorkflow[]> {\n    return this.http\n      .get<TaskWorkflow[]>('workflows/task/boards/' + boardID + '?active=true')\n      .toPromise();\n  }\n\n  createTask(workflow: TaskWorkflow): Promise<TaskWorkflow> {\n    return this.http\n      .post<TaskWorkflow>('workflows/task/', workflow)\n      .toPromise();\n  }\n\n  updateTask(\n    workflowID: string,\n    workflow: Partial<TaskWorkflow>\n  ): Promise<TaskWorkflow> {\n    return this.http\n      .put<TaskWorkflow>('workflows/task/' + workflowID, workflow)\n      .toPromise();\n  }\n\n  removeTask(workflowID: string): Promise<TaskWorkflow> {\n    return this.http\n      .delete<TaskWorkflow>('workflows/task/' + workflowID)\n      .toPromise();\n  }\n\n  runTask(workflowID: string): Promise<any> {\n    return this.http.post<any>('workflows/task/' + workflowID, {}).toPromise();\n  }\n\n  getGroupTaskByWorkflowGroup<T extends GroupTaskEntity>(\n    groupID: string,\n    workflowID: string,\n    representation: T\n  ): Promise<GroupTaskType<T>[]> {\n    return this.http\n      .get<GroupTaskType<T>[]>(\n        `workflows/task/${workflowID}/groupTask/group/${groupID}?representation=${representation}`\n      )\n      .toPromise();\n  }\n\n  getGroupTasks<T extends GroupTaskEntity>(\n    boardID: string,\n    representation: T\n  ): Promise<GroupTaskType<T>[]> {\n    return this.http\n      .get<GroupTaskType<T>[]>(\n        `workflows/task/groupTask/board/${boardID}/user/${this.userService.user?.userID}?representation=${representation}`\n      )\n      .toPromise();\n  }\n\n  getGroupTasksByWorkflow<T extends GroupTaskEntity>(\n    workflowID: string,\n    representation: T\n  ): Promise<GroupTaskType<T>[]> {\n    return this.http\n      .get<GroupTaskType<T>[]>(\n        `workflows/task/${workflowID}/groupTask?representation=${representation}`\n      )\n      .toPromise();\n  }\n\n  updateGroupTask(\n    groupTaskID: string,\n    update: Partial<GroupTask>\n  ): Promise<GroupTask> {\n    return this.http\n      .post<GroupTask>('workflows/task/groupTask/' + groupTaskID, update)\n      .toPromise();\n  }\n\n  updateTaskProgress(\n    workflowID: string,\n    groupTaskID: string,\n    postID: string,\n    delta: number,\n    type: string\n  ): Promise<GroupTask> {\n    return this.http\n      .post<GroupTask>(\n        `workflows/task/${workflowID}/groupTask/${groupTaskID}`,\n        { postID, delta, type }\n      )\n      .toPromise();\n  }\n\n  submitPost(groupTaskID: string, post: string): Promise<GroupTask> {\n    return this.http\n      .post<GroupTask>(`workflows/task/groupTask/${groupTaskID}/submit`, {\n        post,\n      })\n      .toPromise();\n  }\n\n  markGroupTaskComplete(groupTaskID: string): Promise<GroupTask> {\n    return this.http\n      .post<GroupTask>(`workflows/task/groupTask/${groupTaskID}/status`, {\n        status: GroupTaskStatus.COMPLETE,\n      })\n      .toPromise();\n  }\n\n  markGroupTaskActive(groupTaskID: string): Promise<GroupTask> {\n    return this.http\n      .post<GroupTask>(`workflows/task/groupTask/${groupTaskID}/status`, {\n        status: GroupTaskStatus.ACTIVE,\n      })\n      .toPromise();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}