{"ast":null,"code":"import _asyncToGenerator from \"/Users/marieklinaeva/github/ck-board/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FormControl, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { BoardType } from 'src/app/models/board';\nimport { PostType, ContentType } from 'src/app/models/post';\nimport { Role } from 'src/app/models/user';\nimport { NEEDS_ATTENTION_TAG, POST_TAGGED_BORDER_THICKNESS, STUDENT_POST_COLOR, TEACHER_POST_COLOR } from 'src/app/utils/constants';\nimport { MyErrorStateMatcher } from 'src/app/utils/ErrorStateMatcher';\nimport { generateUniqueID } from 'src/app/utils/Utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"src/app/services/canvas.service\";\nimport * as i3 from \"src/app/services/board.service\";\nimport * as i4 from \"src/app/services/project.service\";\nimport * as i5 from \"src/app/services/post.service\";\nimport * as i6 from \"src/app/services/socket.service\";\nimport * as i7 from \"src/app/services/snackbar.service\";\nimport * as i8 from \"src/app/utils/FabricUtils\";\nimport * as i9 from \"@angular/material/dialog\";\nfunction AddPostComponent_h1_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\", 14);\n    i0.ɵɵtext(1, \"Add Post\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPostComponent_h1_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\", 14);\n    i0.ɵɵtext(1, \"Update Post\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPostComponent_mat_radio_group_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-radio-group\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function AddPostComponent_mat_radio_group_4_Template_mat_radio_group_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.contentType = $event);\n    });\n    i0.ɵɵelementStart(1, \"mat-radio-button\", 16);\n    i0.ɵɵtext(2, \" Open Response \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-radio-button\", 17);\n    i0.ɵɵtext(4, \" Multiple Choice \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.contentType);\n  }\n}\nfunction AddPostComponent_mat_error_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Title is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddPostComponent_mat_error_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Title is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"too long!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddPostComponent_div_11_mat_label_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-label\");\n    i0.ɵɵtext(1, \" Add open response question prompt \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPostComponent_div_11_mat_label_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-label\");\n    i0.ɵɵtext(1, \" Message \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPostComponent_div_11_mat_error_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Question Prompt is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddPostComponent_div_11_mat_error_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Message is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"too long!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddPostComponent_div_11_mat_error_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Question Prompt is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"too long!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddPostComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"mat-form-field\", 4);\n    i0.ɵɵtemplate(2, AddPostComponent_div_11_mat_label_2_Template, 2, 0, \"mat-label\", 6);\n    i0.ɵɵtemplate(3, AddPostComponent_div_11_mat_label_3_Template, 2, 0, \"mat-label\", 6);\n    i0.ɵɵelementStart(4, \"textarea\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function AddPostComponent_div_11_Template_textarea_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.message = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, AddPostComponent_div_11_mat_error_5_Template, 4, 0, \"mat-error\", 6);\n    i0.ɵɵtemplate(6, AddPostComponent_div_11_mat_error_6_Template, 4, 0, \"mat-error\", 6);\n    i0.ɵɵtemplate(7, AddPostComponent_div_11_mat_error_7_Template, 4, 0, \"mat-error\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.boardType === \"QUESTION_AUTHORING\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.boardType === \"BRAINSTORMING\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formControl\", ctx_r5.boardType === \"BRAINSTORMING\" ? ctx_r5.msgControl : ctx_r5.questionPromptControl)(\"errorStateMatcher\", ctx_r5.matcher)(\"ngModel\", ctx_r5.message);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.boardType === \"QUESTION_AUTHORING\" && !ctx_r5.message);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.boardType === \"BRAINSTORMING\" && ctx_r5.message && ctx_r5.message.length > 2000);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.boardType === \"QUESTION_AUTHORING\" && ctx_r5.message && ctx_r5.message.length > 2000);\n  }\n}\nfunction AddPostComponent_div_12_mat_error_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Question Prompt is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddPostComponent_div_12_mat_error_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Prompt is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"too long!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddPostComponent_div_12_mat_hint_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\", 26);\n    i0.ɵɵtext(1, \" Multiple Choice Options required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPostComponent_div_12_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function AddPostComponent_div_12_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r27.addMultipleChoiceButton());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"add\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r24.newMultipleChoiceOptionTest || ctx_r24.multipleChoiceOptions.length > 6);\n  }\n}\nfunction AddPostComponent_div_12_mat_hint_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\", 26);\n    i0.ɵɵtext(1, \" Select correct multiple choice option. \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"background-color\": a0\n  };\n};\nfunction AddPostComponent_div_12_mat_card_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 28)(1, \"mat-card-title\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function AddPostComponent_div_12_mat_card_17_Template_button_click_4_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const multipleChoice_r29 = restoredCtx.$implicit;\n      const ctx_r30 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r30.removeMultipleChoiceOption($event, multipleChoice_r29));\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\", 31);\n    i0.ɵɵtext(6, \" delete \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function AddPostComponent_div_12_mat_card_17_Template_button_click_7_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const multipleChoice_r29 = restoredCtx.$implicit;\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r32.multipleChoiceAnswer($event, multipleChoice_r29));\n    });\n    i0.ɵɵelementStart(8, \"mat-icon\", 31);\n    i0.ɵɵtext(9, \" check_circle_outline \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const multipleChoice_r29 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(2, _c0, multipleChoice_r29.correct ? \"#39e75f\" : \"white\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", multipleChoice_r29.optionTitle, \" \");\n  }\n}\nfunction AddPostComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\")(2, \"mat-form-field\", 4)(3, \"mat-label\");\n    i0.ɵɵtext(4, \" Multiple Choice Question Prompt \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 20);\n    i0.ɵɵlistener(\"ngModelChange\", function AddPostComponent_div_12_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.message = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, AddPostComponent_div_12_mat_error_6_Template, 4, 0, \"mat-error\", 6);\n    i0.ɵɵtemplate(7, AddPostComponent_div_12_mat_error_7_Template, 4, 0, \"mat-error\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 21)(9, \"mat-form-field\", 22)(10, \"mat-label\");\n    i0.ɵɵtext(11, \"New Multiple Choice Option\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function AddPostComponent_div_12_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.newMultipleChoiceOptionTest = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, AddPostComponent_div_12_mat_hint_13_Template, 2, 0, \"mat-hint\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, AddPostComponent_div_12_button_14_Template, 3, 1, \"button\", 24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\");\n    i0.ɵɵtemplate(16, AddPostComponent_div_12_mat_hint_16_Template, 2, 0, \"mat-hint\", 8);\n    i0.ɵɵtemplate(17, AddPostComponent_div_12_mat_card_17_Template, 10, 4, \"mat-card\", 25);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"formControl\", ctx_r6.questionPromptControl)(\"errorStateMatcher\", ctx_r6.matcher)(\"ngModel\", ctx_r6.message);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r6.message);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.message && ctx_r6.message.length > 2000);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.newMultipleChoiceOptionTest);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.multipleChoiceOptions.length < 2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.multipleChoiceOptions.length < 6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.multipleChoiceOptions.length > 1 && !ctx_r6.correctMultipleChoiceSelected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.multipleChoiceOptions);\n  }\n}\nfunction AddPostComponent_mat_hint_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\", 26);\n    i0.ɵɵtext(1, \" One or more tags \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AddPostComponent_mat_form_field_14_mat_chip_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r43 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"mat-icon\", 41);\n    i0.ɵɵlistener(\"click\", function AddPostComponent_mat_form_field_14_mat_chip_7_Template_mat_icon_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r43);\n      const tag_r41 = restoredCtx.$implicit;\n      const ctx_r42 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r42.removeTag(tag_r41));\n    });\n    i0.ɵɵtext(3, \"cancel\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const tag_r41 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(2, _c0, tag_r41.color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tag_r41.name, \" \");\n  }\n}\nfunction AddPostComponent_mat_form_field_14_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \" No tags available. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPostComponent_mat_form_field_14_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r46 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵlistener(\"click\", function AddPostComponent_mat_form_field_14_div_11_Template_div_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r46);\n      const tagOption_r44 = restoredCtx.$implicit;\n      const ctx_r45 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r45.addTag($event, tagOption_r44));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tagOption_r44 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tagOption_r44.name, \" \");\n  }\n}\nfunction AddPostComponent_mat_form_field_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 33)(1, \"mat-chip-list\", null, 34)(3, \"mat-chip\", 35);\n    i0.ɵɵtext(4, \" Add Tag \");\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \"add\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, AddPostComponent_mat_form_field_14_mat_chip_7_Template, 4, 4, \"mat-chip\", 36);\n    i0.ɵɵelementStart(8, \"mat-menu\", null, 37);\n    i0.ɵɵtemplate(10, AddPostComponent_mat_form_field_14_div_10_Template, 2, 0, \"div\", 38);\n    i0.ɵɵtemplate(11, AddPostComponent_mat_form_field_14_div_11_Template, 2, 1, \"div\", 39);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const _r38 = i0.ɵɵreference(9);\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r38);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.tags);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.tagOptions && ctx_r8.tagOptions.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.tagOptions);\n  }\n}\nfunction AddPostComponent_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function AddPostComponent_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r48);\n      const ctx_r47 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r47.handleDialogSubmit());\n    });\n    i0.ɵɵtext(1, \" Add Post \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"spinner\", ctx_r9.creationInProgress);\n    i0.ɵɵproperty(\"disabled\", ctx_r9.disabled() || ctx_r9.creationInProgress || ctx_r9.tagRequired && ctx_r9.tags.length === 0);\n  }\n}\nfunction AddPostComponent_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r50 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function AddPostComponent_button_19_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r50);\n      const ctx_r49 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r49.handlePersonalBoardCopy());\n    });\n    i0.ɵɵtext(1, \" Copy to All Students' Personal Boards \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r10.disabled());\n  }\n}\nfunction AddPostComponent_button_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r52 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function AddPostComponent_button_20_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r52);\n      const ctx_r51 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r51.updateMultipleChoicePost());\n    });\n    i0.ɵɵtext(1, \" Update Post \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r11.disabled());\n  }\n}\nexport class AddPostComponent {\n  constructor(userService, canvasService, boardService, projectService, postService, socketService, snackbarService, fabricUtils, dialogRef, data) {\n    var _a, _b, _c;\n    this.userService = userService;\n    this.canvasService = canvasService;\n    this.boardService = boardService;\n    this.projectService = projectService;\n    this.postService = postService;\n    this.socketService = socketService;\n    this.snackbarService = snackbarService;\n    this.fabricUtils = fabricUtils;\n    this.dialogRef = dialogRef;\n    this.data = data;\n    this.newMultipleChoiceOptionTest = '';\n    this.multipleChoiceOptions = [];\n    this.correctMultipleChoiceSelected = false;\n    this.contentType = ContentType.OPEN_RESPONSE_MESSAGE;\n    this.creationInProgress = false;\n    this.title = '';\n    this.message = '';\n    this.tags = [];\n    this.tagOptions = [];\n    this.titleControl = new FormControl('', [Validators.required, Validators.maxLength(50)]);\n    this.msgControl = new FormControl('', [Validators.maxLength(2000)]);\n    this.questionPromptControl = new FormControl('', [Validators.required, Validators.maxLength(2000)]);\n    this.tagRequired = false;\n    this.matcher = new MyErrorStateMatcher();\n    this.user = data.user;\n    this.board = data.board;\n    this.boardType = data.board.type;\n    this.editingPost = data.editingPost;\n    this.tagRequired = (_a = data === null || data === void 0 ? void 0 : data.tagRequired) !== null && _a !== void 0 ? _a : false;\n    if (this.editingPost) {\n      this.contentType = ContentType.MULTIPLE_CHOICE;\n      this.title = this.editingPost.title;\n      this.multipleChoiceOptions = this.editingPost.multipleChoice ? this.editingPost.multipleChoice : [];\n      this.tags = this.editingPost.tags;\n      this.correctMultipleChoiceSelected = true;\n    } else {\n      this.title = (_b = localStorage.getItem('post_create_title')) !== null && _b !== void 0 ? _b : '';\n      this.message = (_c = localStorage.getItem('post_create_message')) !== null && _c !== void 0 ? _c : '';\n    }\n    this.tagOptions = data.board.tags.filter(n => !this.tags.map(b => b.name).includes(n.name));\n  }\n  addTag(event, tagOption) {\n    event.stopPropagation();\n    this.tags.push(tagOption);\n    this.tagOptions = this.tagOptions.filter(tag => tag != tagOption);\n  }\n  removeTag(tag) {\n    const index = this.tags.indexOf(tag);\n    if (index >= 0) {\n      this.tags.splice(index, 1);\n    }\n    this.tagOptions.push(tag);\n  }\n  addMultipleChoiceButton() {\n    this.multipleChoiceOptions.push({\n      optionTitle: this.newMultipleChoiceOptionTest,\n      correct: false,\n      formula: false\n    });\n    this.newMultipleChoiceOptionTest = '';\n  }\n  removeMultipleChoiceOption(event, option) {\n    event.stopPropagation();\n    const index = this.multipleChoiceOptions.indexOf(option);\n    if (index >= 0) {\n      if (this.multipleChoiceOptions[index].correct) this.correctMultipleChoiceSelected = false;\n      this.multipleChoiceOptions.splice(index, 1);\n    }\n  }\n  multipleChoiceAnswer(event, option) {\n    event.stopPropagation();\n    this.correctMultipleChoiceSelected = true;\n    const index = this.multipleChoiceOptions.indexOf(option);\n    if (index >= 0) {\n      this.multipleChoiceOptions[index].correct = true;\n      for (let i = 0; i < this.multipleChoiceOptions.length; i++) {\n        if (i != index) this.multipleChoiceOptions[i].correct = false;\n      }\n    }\n  }\n  disabled() {\n    if (this.editingPost) {\n      return !this.titleControl.valid || !this.msgControl.valid || !(this.multipleChoiceOptions.length >= 2) || !this.correctMultipleChoiceSelected || !this.questionPromptControl.valid;\n    } else if (this.contentType == ContentType.MULTIPLE_CHOICE) {\n      return !this.titleControl.valid || !this.message || !(this.multipleChoiceOptions.length >= 2) || !this.correctMultipleChoiceSelected || !this.questionPromptControl.valid;\n    } else if (this.boardType === BoardType.QUESTION_AUTHORING && this.contentType == ContentType.OPEN_RESPONSE_MESSAGE) {\n      return !this.titleControl.valid || !this.questionPromptControl.valid;\n    } else {\n      return !this.titleControl.valid || !this.msgControl.valid;\n    }\n  }\n  getBoardPost() {\n    const containsAttentionTag = this.tags.find(tag => tag.name == NEEDS_ATTENTION_TAG.name);\n    const displayAttributes = {\n      position: {\n        left: this.data.spawnPosition.left,\n        top: this.data.spawnPosition.top\n      },\n      lock: !this.board.permissions.allowStudentMoveAny,\n      borderColor: containsAttentionTag ? NEEDS_ATTENTION_TAG.color : undefined,\n      borderWidth: containsAttentionTag ? POST_TAGGED_BORDER_THICKNESS : undefined,\n      fillColor: this.defaultPostFill()\n    };\n    return {\n      postID: generateUniqueID(),\n      userID: this.user.userID,\n      boardID: this.board.boardID,\n      type: PostType.BOARD,\n      contentType: this.contentType,\n      multipleChoice: this.multipleChoiceOptions,\n      title: this.title,\n      author: this.user.username,\n      desc: this.message,\n      tags: this.tags,\n      displayAttributes: displayAttributes\n    };\n  }\n  getBucketPost() {\n    return {\n      postID: generateUniqueID(),\n      userID: this.user.userID,\n      boardID: this.board.boardID,\n      author: this.user.username,\n      type: PostType.BUCKET,\n      contentType: this.contentType,\n      multipleChoice: this.multipleChoiceOptions,\n      title: this.title,\n      desc: this.message,\n      tags: this.tags,\n      displayAttributes: {\n        fillColor: this.defaultPostFill()\n      }\n    };\n  }\n  getListPost() {\n    return {\n      postID: generateUniqueID(),\n      userID: this.user.userID,\n      boardID: this.board.boardID,\n      author: this.user.username,\n      type: PostType.LIST,\n      contentType: this.contentType,\n      multipleChoice: this.multipleChoiceOptions,\n      title: this.title,\n      desc: this.message,\n      tags: this.tags,\n      displayAttributes: {\n        fillColor: this.defaultPostFill()\n      }\n    };\n  }\n  getPartialPost() {\n    return {\n      postID: generateUniqueID(),\n      userID: this.user.userID,\n      author: this.user.username,\n      contentType: this.contentType,\n      multipleChoice: this.multipleChoiceOptions,\n      title: this.title,\n      desc: this.message,\n      tags: this.tags,\n      displayAttributes: {\n        fillColor: this.defaultPostFill()\n      }\n    };\n  }\n  addPost() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const post = _this.getBoardPost();\n      yield _this.canvasService.createPost(post);\n      return post;\n    })();\n  }\n  addBucketPost() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const bucketID = _this2.data.bucket.bucketID;\n      const post = _this2.getBucketPost();\n      return yield _this2.canvasService.createBucketPost(bucketID, post);\n    })();\n  }\n  addListPost() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const post = _this3.getListPost();\n      return yield _this3.canvasService.createListPost(post);\n    })();\n  }\n  handlePersonalBoardCopy() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const project = yield _this4.projectService.get(_this4.board.projectID);\n        const boards = yield _this4.boardService.getAllPersonal(_this4.board.projectID);\n        for (const board of boards) {\n          if (!project.teacherIDs.includes(board.ownerID) || board.ownerID === _this4.user.userID) {\n            let post;\n            if (_this4.data.type == PostType.BUCKET && _this4.data.bucket) post = _this4.getBucketPost();else if (_this4.data.type == PostType.LIST) post = _this4.getListPost();else post = _this4.getBoardPost();\n            post.boardID = board.boardID;\n            const newPost = yield _this4.postService.create(post);\n          }\n        }\n        _this4.snackbarService.queueSnackbar('Successfully copied post to all student personal boards.');\n      } catch (error) {\n        _this4.snackbarService.queueSnackbar('Unable to copy posts. Please refresh and try again!');\n      } finally {\n        _this4.dialogRef.close();\n      }\n    })();\n  }\n  updateMultipleChoicePost() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (_this5.editingPost) {\n        const update = {\n          postID: _this5.editingPost.postID,\n          title: _this5.title,\n          multipleChoice: _this5.multipleChoiceOptions,\n          tags: _this5.tags\n        };\n        if (_this5.data.onComplete) {\n          _this5.data.onComplete(update);\n        }\n        _this5.dialogRef.close();\n      }\n    })();\n  }\n  handleDialogSubmit() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      var _a;\n      _this6.creationInProgress = true;\n      let post;\n      if ((_a = _this6.data) === null || _a === void 0 ? void 0 : _a.disableCreation) {\n        const _post = _this6.getPartialPost();\n        if (_this6.data.onComplete) {\n          _this6.data.onComplete(_post);\n        }\n        _this6.dialogRef.close();\n        return;\n      }\n      localStorage.setItem('post_create_title', _this6.title);\n      localStorage.setItem('post_create_message', _this6.message);\n      try {\n        if (_this6.data.type == PostType.BUCKET && _this6.data.bucket) {\n          post = yield _this6.addBucketPost();\n        } else if (_this6.data.type == PostType.LIST) {\n          post = yield _this6.addListPost();\n        } else {\n          post = yield _this6.addPost();\n        }\n        localStorage.removeItem('post_create_title');\n        localStorage.removeItem('post_create_message');\n        if (_this6.data.onComplete) {\n          _this6.data.onComplete(post);\n        }\n        _this6.creationInProgress = false;\n      } catch (e) {\n        _this6.snackbarService.queueSnackbar('Unable to create post. Please refresh and try again!');\n      } finally {\n        _this6.dialogRef.close();\n      }\n    })();\n  }\n  defaultPostFill() {\n    var _a;\n    return ((_a = this.userService.user) === null || _a === void 0 ? void 0 : _a.role) === Role.TEACHER ? TEACHER_POST_COLOR : STUDENT_POST_COLOR;\n  }\n  onNoClick() {\n    this.dialogRef.close();\n  }\n}\nAddPostComponent.ɵfac = function AddPostComponent_Factory(t) {\n  return new (t || AddPostComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.CanvasService), i0.ɵɵdirectiveInject(i3.BoardService), i0.ɵɵdirectiveInject(i4.ProjectService), i0.ɵɵdirectiveInject(i5.PostService), i0.ɵɵdirectiveInject(i6.SocketService), i0.ɵɵdirectiveInject(i7.SnackbarService), i0.ɵɵdirectiveInject(i8.FabricUtils), i0.ɵɵdirectiveInject(i9.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n};\nAddPostComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddPostComponent,\n  selectors: [[\"app-dialog\"]],\n  decls: 21,\n  vars: 16,\n  consts: [[\"mat-dialog-title\", \"\", 4, \"ngIf\"], [\"mat-dialog-content\", \"\"], [2, \"margin-bottom\", \"10px\"], [3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"appearance\", \"fill\", 2, \"width\", \"100%\"], [\"name\", \"title\", \"matInput\", \"\", \"autocomplete\", \"off\", 3, \"appAutofocus\", \"formControl\", \"errorStateMatcher\", \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"style\", \"position: relative\", 4, \"ngIf\"], [\"class\", \"mat-error\", 4, \"ngIf\"], [\"class\", \"tag-form\", \"appearance\", \"standard\", 4, \"ngIf\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", 3, \"click\"], [\"type\", \"submit\", \"mat-button\", \"\", \"cdkFocusInitial\", \"\", 3, \"spinner\", \"disabled\", \"click\", 4, \"ngIf\"], [\"type\", \"submit\", \"mat-button\", \"\", \"cdkFocusInitial\", \"\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-dialog-title\", \"\"], [3, \"ngModel\", \"ngModelChange\"], [\"value\", \"OPEN_RESPONSE_MESSAGE\", 2, \"margin-left\", \"10px\"], [\"value\", \"MULTIPLE_CHOICE\", 2, \"margin-left\", \"10px\"], [\"matInput\", \"\", \"rows\", \"5\", \"cols\", \"40\", 3, \"formControl\", \"errorStateMatcher\", \"ngModel\", \"ngModelChange\"], [2, \"position\", \"relative\"], [\"name\", \"message\", \"matInput\", \"\", 3, \"formControl\", \"errorStateMatcher\", \"ngModel\", \"ngModelChange\"], [2, \"display\", \"flex\", \"text-align\", \"center\"], [\"appearance\", \"outline\", 2, \"width\", \"100%\"], [\"matInput\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"mat-mini-fab\", \"\", \"style\", \"margin: 0 10px\", \"color\", \"accent\", \"matTooltip\", \"Add Multiple Choice Option\", \"matTooltipPosition\", \"before\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"style\", \"\\n          display: flex;\\n          margin: 10px;\\n          padding: 10px;\\n          justify-content: space-between;\\n        \", 3, \"ngStyle\", 4, \"ngFor\", \"ngForOf\"], [1, \"mat-error\"], [\"mat-mini-fab\", \"\", \"color\", \"accent\", \"matTooltip\", \"Add Multiple Choice Option\", \"matTooltipPosition\", \"before\", 2, \"margin\", \"0 10px\", 3, \"disabled\", \"click\"], [2, \"display\", \"flex\", \"margin\", \"10px\", \"padding\", \"10px\", \"justify-content\", \"space-between\", 3, \"ngStyle\"], [2, \"font-size\", \"small\", \"margin\", \"auto 0\"], [\"mat-mini-fab\", \"\", \"color\", \"accent\", \"matTooltip\", \"Delete\", \"matTooltipPosition\", \"before\", 2, \"margin\", \"0 10px\", 3, \"click\"], [1, \"editMultipleChoiceOptions\"], [\"mat-mini-fab\", \"\", \"color\", \"accent\", \"matTooltip\", \"Correct Option\", \"matTooltipPosition\", \"before\", 2, \"margin\", \"0 10px\", 3, \"click\"], [\"appearance\", \"standard\", 1, \"tag-form\"], [\"chipList\", \"\"], [2, \"background-color\", \"#78c2c0\", 3, \"matMenuTriggerFor\"], [3, \"ngStyle\", 4, \"ngFor\", \"ngForOf\"], [\"menu1\", \"matMenu\"], [\"mat-menu-item\", \"\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngStyle\"], [1, \"cancel\", 3, \"click\"], [\"mat-menu-item\", \"\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"type\", \"submit\", \"mat-button\", \"\", \"cdkFocusInitial\", \"\", 3, \"disabled\", \"click\"]],\n  template: function AddPostComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AddPostComponent_h1_0_Template, 2, 0, \"h1\", 0);\n      i0.ɵɵtemplate(1, AddPostComponent_h1_1_Template, 2, 0, \"h1\", 0);\n      i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2);\n      i0.ɵɵtemplate(4, AddPostComponent_mat_radio_group_4_Template, 5, 1, \"mat-radio-group\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"mat-form-field\", 4)(6, \"mat-label\");\n      i0.ɵɵtext(7, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function AddPostComponent_Template_input_ngModelChange_8_listener($event) {\n        return ctx.title = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, AddPostComponent_mat_error_9_Template, 4, 0, \"mat-error\", 6);\n      i0.ɵɵtemplate(10, AddPostComponent_mat_error_10_Template, 4, 0, \"mat-error\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(11, AddPostComponent_div_11_Template, 8, 8, \"div\", 6);\n      i0.ɵɵtemplate(12, AddPostComponent_div_12_Template, 18, 10, \"div\", 7);\n      i0.ɵɵtemplate(13, AddPostComponent_mat_hint_13_Template, 4, 0, \"mat-hint\", 8);\n      i0.ɵɵtemplate(14, AddPostComponent_mat_form_field_14_Template, 12, 4, \"mat-form-field\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 10)(16, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function AddPostComponent_Template_button_click_16_listener() {\n        return ctx.onNoClick();\n      });\n      i0.ɵɵtext(17, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(18, AddPostComponent_button_18_Template, 2, 3, \"button\", 12);\n      i0.ɵɵtemplate(19, AddPostComponent_button_19_Template, 2, 1, \"button\", 13);\n      i0.ɵɵtemplate(20, AddPostComponent_button_20_Template, 2, 1, \"button\", 13);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.editingPost);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.editingPost);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.boardType === \"QUESTION_AUTHORING\" && !ctx.editingPost);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"appAutofocus\", true)(\"formControl\", ctx.titleControl)(\"errorStateMatcher\", ctx.matcher)(\"ngModel\", ctx.title);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.title);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.title && ctx.title.length > 50);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.contentType === \"OPEN_RESPONSE_MESSAGE\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.contentType === \"MULTIPLE_CHOICE\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tagRequired && ctx.tags.length === 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.editingPost);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", !ctx.editingPost);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.editingPost && ctx.user.role === \"TEACHER\" && ctx.board.scope === \"PROJECT_PERSONAL\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.editingPost);\n    }\n  },\n  styles: [\".tag-form[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.cancel[_ngcontent-%COMP%], .correct[_ngcontent-%COMP%] {\\n  padding-left: 10px;\\n  width: 12px;\\n  height: 15px;\\n  font-size: medium;\\n}\\n\\n.addMultipleChoiceButton[_ngcontent-%COMP%] {\\n  float: right;\\n  position: absolute;\\n  right: 0;\\n  margin: 10px 10px;\\n}\\n\\n@keyframes _ngcontent-%COMP%_spinner {\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n.spinner[_ngcontent-%COMP%]:before {\\n  content: \\\"\\\";\\n  box-sizing: border-box;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  width: 20px;\\n  height: 20px;\\n  margin-top: -10px;\\n  margin-left: -10px;\\n  border-radius: 50%;\\n  border: 2px solid #ffffff;\\n  border-top-color: #000000;\\n  animation: _ngcontent-%COMP%_spinner 0.8s linear infinite;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9hZGQtcG9zdC1tb2RhbC9hZGQtcG9zdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtBQUNGOztBQUVBO0VBQ0UsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLGlCQUFBO0FBQ0Y7O0FBRUE7RUFDRTtJQUFJLHlCQUFBO0VBRUo7QUFDRjtBQUFBO0VBQ0UsV0FBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSx5QkFBQTtFQUNBLHVDQUFBO0FBRUYiLCJzb3VyY2VzQ29udGVudCI6WyIudGFnLWZvcm0ge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmNhbmNlbCwgLmNvcnJlY3Qge1xuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gIHdpZHRoOiAxMnB4O1xuICBoZWlnaHQ6IDE1cHg7XG4gIGZvbnQtc2l6ZTogbWVkaXVtO1xufVxuXG4uYWRkTXVsdGlwbGVDaG9pY2VCdXR0b257XG4gIGZsb2F0OiByaWdodDtcbiAgcG9zaXRpb246IGFic29sdXRlOyBcbiAgcmlnaHQ6IDA7IFxuICBtYXJnaW46IDEwcHggMTBweDtcbn1cblxuQGtleWZyYW1lcyBzcGlubmVyIHtcbiAgdG8ge3RyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7fVxufVxuIFxuLnNwaW5uZXI6YmVmb3JlIHtcbiAgY29udGVudDogJyc7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCU7XG4gIGxlZnQ6IDUwJTtcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgbWFyZ2luLXRvcDogLTEwcHg7XG4gIG1hcmdpbi1sZWZ0OiAtMTBweDtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xuICBib3JkZXI6IDJweCBzb2xpZCAjZmZmZmZmO1xuICBib3JkZXItdG9wLWNvbG9yOiAjMDAwMDAwO1xuICBhbmltYXRpb246IHNwaW5uZXIgLjhzIGxpbmVhciBpbmZpbml0ZTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","MAT_DIALOG_DATA","BoardType","PostType","ContentType","Role","NEEDS_ATTENTION_TAG","POST_TAGGED_BORDER_THICKNESS","STUDENT_POST_COLOR","TEACHER_POST_COLOR","MyErrorStateMatcher","generateUniqueID","i0","AddPostComponent","constructor","userService","canvasService","boardService","projectService","postService","socketService","snackbarService","fabricUtils","dialogRef","data","OPEN_RESPONSE_MESSAGE","required","maxLength","user","board","boardType","type","editingPost","tagRequired","contentType","MULTIPLE_CHOICE","title","multipleChoiceOptions","multipleChoice","tags","correctMultipleChoiceSelected","getItem","message","tagOptions","filter","n","map","b","name","includes","addTag","event","tagOption","stopPropagation","push","tag","removeTag","index","indexOf","splice","addMultipleChoiceButton","optionTitle","newMultipleChoiceOptionTest","correct","formula","removeMultipleChoiceOption","option","multipleChoiceAnswer","i","length","disabled","titleControl","valid","msgControl","questionPromptControl","QUESTION_AUTHORING","getBoardPost","containsAttentionTag","find","displayAttributes","position","left","spawnPosition","top","lock","permissions","allowStudentMoveAny","borderColor","color","undefined","borderWidth","fillColor","defaultPostFill","postID","userID","boardID","BOARD","author","username","desc","getBucketPost","BUCKET","getListPost","LIST","getPartialPost","addPost","post","createPost","addBucketPost","bucketID","bucket","createBucketPost","addListPost","createListPost","handlePersonalBoardCopy","project","get","projectID","boards","getAllPersonal","teacherIDs","ownerID","newPost","create","queueSnackbar","error","close","updateMultipleChoicePost","update","onComplete","handleDialogSubmit","creationInProgress","disableCreation","_post","localStorage","setItem","removeItem","e","role","TEACHER","onNoClick","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/marieklinaeva/github/ck-board/frontend/src/app/components/add-post-modal/add-post.component.ts","/Users/marieklinaeva/github/ck-board/frontend/src/app/components/add-post-modal/add-post.component.html"],"sourcesContent":["import { T } from '@angular/cdk/keycodes';\nimport { Component, Inject } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Board, BoardType } from 'src/app/models/board';\nimport Bucket from 'src/app/models/bucket';\nimport Post, {\n  DisplayAttributes,\n  PostType,\n  ContentType,\n  MultipleChoiceOptions,\n} from 'src/app/models/post';\nimport { Tag } from 'src/app/models/tag';\nimport User, { Role } from 'src/app/models/user';\nimport { CanvasService } from 'src/app/services/canvas.service';\nimport { UserService } from 'src/app/services/user.service';\nimport { BoardService } from 'src/app/services/board.service';\nimport { PostService } from 'src/app/services/post.service';\nimport { ProjectService } from 'src/app/services/project.service';\nimport { SnackbarService } from 'src/app/services/snackbar.service';\nimport { SocketService } from 'src/app/services/socket.service';\nimport {\n  NEEDS_ATTENTION_TAG,\n  POST_TAGGED_BORDER_THICKNESS,\n  STUDENT_POST_COLOR,\n  TEACHER_POST_COLOR,\n  SocketEvent,\n} from 'src/app/utils/constants';\nimport { MyErrorStateMatcher } from 'src/app/utils/ErrorStateMatcher';\nimport { FabricUtils } from 'src/app/utils/FabricUtils';\nimport { generateUniqueID } from 'src/app/utils/Utils';\n\nexport interface AddPostDialog {\n  type: PostType;\n  user: User;\n  board: Board;\n  bucket?: Bucket;\n  spawnPosition: { left: number; top: number };\n  onComplete?: (post: any) => any;\n  editingPost?: Post | undefined;\n  disableCreation?: boolean;\n  tagRequired?: boolean;\n}\n\n@Component({\n  selector: 'app-dialog',\n  templateUrl: './add-post.component.html',\n  styleUrls: ['./add-post.component.scss'],\n})\nexport class AddPostComponent {\n  user: User;\n  board: Board;\n  boardType: BoardType;\n  newMultipleChoiceOptionTest = '';\n  multipleChoiceOptions: MultipleChoiceOptions[] = [];\n  correctMultipleChoiceSelected = false;\n  editingPost: Post | undefined;\n  contentType: ContentType = ContentType.OPEN_RESPONSE_MESSAGE;\n  creationInProgress = false;\n\n  title = '';\n  message = '';\n\n  tags: Tag[] = [];\n  tagOptions: Tag[] = [];\n\n  titleControl = new FormControl('', [\n    Validators.required,\n    Validators.maxLength(50),\n  ]);\n  msgControl = new FormControl('', [Validators.maxLength(2000)]);\n  questionPromptControl = new FormControl('', [\n    Validators.required,\n    Validators.maxLength(2000),\n  ]);\n\n  tagRequired: boolean = false;\n\n  matcher = new MyErrorStateMatcher();\n\n  constructor(\n    public userService: UserService,\n    public canvasService: CanvasService,\n    public boardService: BoardService,\n    public projectService: ProjectService,\n    public postService: PostService,\n    public socketService: SocketService,\n    public snackbarService: SnackbarService,\n    public fabricUtils: FabricUtils,\n    public dialogRef: MatDialogRef<AddPostComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: AddPostDialog\n  ) {\n    this.user = data.user;\n    this.board = data.board;\n    this.boardType = data.board.type;\n    this.editingPost = data.editingPost;\n    this.tagRequired = data?.tagRequired ?? false;\n    if (this.editingPost) {\n      this.contentType = ContentType.MULTIPLE_CHOICE;\n      this.title = this.editingPost.title;\n      this.multipleChoiceOptions = this.editingPost.multipleChoice\n        ? this.editingPost.multipleChoice\n        : [];\n      this.tags = this.editingPost.tags;\n      this.correctMultipleChoiceSelected = true;\n    } else {\n      this.title = localStorage.getItem('post_create_title') ?? '';\n      this.message = localStorage.getItem('post_create_message') ?? '';\n    }\n    this.tagOptions = data.board.tags.filter(\n      (n) => !this.tags.map((b) => b.name).includes(n.name)\n    );\n  }\n\n  addTag(event, tagOption): void {\n    event.stopPropagation();\n    this.tags.push(tagOption);\n    this.tagOptions = this.tagOptions.filter((tag) => tag != tagOption);\n  }\n\n  removeTag(tag) {\n    const index = this.tags.indexOf(tag);\n    if (index >= 0) {\n      this.tags.splice(index, 1);\n    }\n\n    this.tagOptions.push(tag);\n  }\n\n  addMultipleChoiceButton() {\n    this.multipleChoiceOptions.push({\n      optionTitle: this.newMultipleChoiceOptionTest,\n      correct: false,\n      formula: false,\n    });\n    this.newMultipleChoiceOptionTest = '';\n  }\n\n  removeMultipleChoiceOption(event, option) {\n    event.stopPropagation();\n    const index = this.multipleChoiceOptions.indexOf(option);\n\n    if (index >= 0) {\n      if (this.multipleChoiceOptions[index].correct)\n        this.correctMultipleChoiceSelected = false;\n      this.multipleChoiceOptions.splice(index, 1);\n    }\n  }\n\n  multipleChoiceAnswer(event, option) {\n    event.stopPropagation();\n    this.correctMultipleChoiceSelected = true;\n    const index = this.multipleChoiceOptions.indexOf(option);\n    if (index >= 0) {\n      this.multipleChoiceOptions[index].correct = true;\n      for (let i = 0; i < this.multipleChoiceOptions.length; i++) {\n        if (i != index) this.multipleChoiceOptions[i].correct = false;\n      }\n    }\n  }\n  disabled() {\n    if (this.editingPost) {\n      return (\n        !this.titleControl.valid ||\n        !this.msgControl.valid ||\n        !(this.multipleChoiceOptions.length >= 2) ||\n        !this.correctMultipleChoiceSelected ||\n        !this.questionPromptControl.valid\n      );\n    } else if (this.contentType == ContentType.MULTIPLE_CHOICE) {\n      return (\n        !this.titleControl.valid ||\n        !this.message ||\n        !(this.multipleChoiceOptions.length >= 2) ||\n        !this.correctMultipleChoiceSelected ||\n        !this.questionPromptControl.valid\n      );\n    } else if (\n      this.boardType === BoardType.QUESTION_AUTHORING &&\n      this.contentType == ContentType.OPEN_RESPONSE_MESSAGE\n    ) {\n      return !this.titleControl.valid || !this.questionPromptControl.valid;\n    } else {\n      return !this.titleControl.valid || !this.msgControl.valid;\n    }\n  }\n\n  getBoardPost(): Post {\n    const containsAttentionTag = this.tags.find(\n      (tag) => tag.name == NEEDS_ATTENTION_TAG.name\n    );\n\n    const displayAttributes: DisplayAttributes = {\n      position: {\n        left: this.data.spawnPosition.left,\n        top: this.data.spawnPosition.top,\n      },\n      lock: !this.board.permissions.allowStudentMoveAny,\n      borderColor: containsAttentionTag ? NEEDS_ATTENTION_TAG.color : undefined,\n      borderWidth: containsAttentionTag\n        ? POST_TAGGED_BORDER_THICKNESS\n        : undefined,\n      fillColor: this.defaultPostFill(),\n    };\n\n    return {\n      postID: generateUniqueID(),\n      userID: this.user.userID,\n      boardID: this.board.boardID,\n      type: PostType.BOARD,\n      contentType: this.contentType,\n      multipleChoice: this.multipleChoiceOptions,\n      title: this.title,\n      author: this.user.username,\n      desc: this.message,\n      tags: this.tags,\n      displayAttributes: displayAttributes,\n    };\n  }\n\n  getBucketPost(): Post {\n    return {\n      postID: generateUniqueID(),\n      userID: this.user.userID,\n      boardID: this.board.boardID,\n      author: this.user.username,\n      type: PostType.BUCKET,\n      contentType: this.contentType,\n      multipleChoice: this.multipleChoiceOptions,\n      title: this.title,\n      desc: this.message,\n      tags: this.tags,\n      displayAttributes: { fillColor: this.defaultPostFill() },\n    };\n  }\n\n  getListPost(): Post {\n    return {\n      postID: generateUniqueID(),\n      userID: this.user.userID,\n      boardID: this.board.boardID,\n      author: this.user.username,\n      type: PostType.LIST,\n      contentType: this.contentType,\n      multipleChoice: this.multipleChoiceOptions,\n      title: this.title,\n      desc: this.message,\n      tags: this.tags,\n      displayAttributes: { fillColor: this.defaultPostFill() },\n    };\n  }\n\n  getPartialPost(): Partial<Post> {\n    return {\n      postID: generateUniqueID(),\n      userID: this.user.userID,\n      author: this.user.username,\n      contentType: this.contentType,\n      multipleChoice: this.multipleChoiceOptions,\n      title: this.title,\n      desc: this.message,\n      tags: this.tags,\n      displayAttributes: { fillColor: this.defaultPostFill() },\n    };\n  }\n\n  async addPost() {\n    const post = this.getBoardPost();\n    await this.canvasService.createPost(post);\n    return post;\n  }\n\n  async addBucketPost() {\n    const bucketID: string = this.data.bucket!.bucketID;\n    const post: Post = this.getBucketPost();\n    return await this.canvasService.createBucketPost(bucketID, post);\n  }\n\n  async addListPost() {\n    const post: Post = this.getListPost();\n    return await this.canvasService.createListPost(post);\n  }\n\n  async handlePersonalBoardCopy() {\n    try {\n      const project = await this.projectService.get(this.board.projectID);\n      const boards = await this.boardService.getAllPersonal(\n        this.board.projectID\n      );\n\n      for (const board of boards) {\n        if (\n          !project.teacherIDs.includes(board.ownerID) ||\n          board.ownerID === this.user.userID\n        ) {\n          let post;\n          if (this.data.type == PostType.BUCKET && this.data.bucket)\n            post = this.getBucketPost();\n          else if (this.data.type == PostType.LIST) post = this.getListPost();\n          else post = this.getBoardPost();\n\n          post.boardID = board.boardID;\n          const newPost = await this.postService.create(post);\n        }\n      }\n      this.snackbarService.queueSnackbar(\n        'Successfully copied post to all student personal boards.'\n      );\n    } catch (error) {\n      this.snackbarService.queueSnackbar(\n        'Unable to copy posts. Please refresh and try again!'\n      );\n    } finally {\n      this.dialogRef.close();\n    }\n  }\n\n  async updateMultipleChoicePost() {\n    if (this.editingPost) {\n      const update: Partial<Post> = {\n        postID: this.editingPost.postID,\n        title: this.title,\n        multipleChoice: this.multipleChoiceOptions,\n        tags: this.tags,\n      };\n      if (this.data.onComplete) {\n        this.data.onComplete(update);\n      }\n      this.dialogRef.close();\n    }\n  }\n\n  async handleDialogSubmit() {\n    this.creationInProgress = true;\n    let post: Post;\n    if (this.data?.disableCreation) {\n      const _post = this.getPartialPost();\n      if (this.data.onComplete) {\n        this.data.onComplete(_post);\n      }\n      this.dialogRef.close();\n      return;\n    }\n\n    localStorage.setItem('post_create_title', this.title);\n    localStorage.setItem('post_create_message', this.message);\n    try {\n      if (this.data.type == PostType.BUCKET && this.data.bucket) {\n        post = await this.addBucketPost();\n      } else if (this.data.type == PostType.LIST) {\n        post = await this.addListPost();\n      } else {\n        post = await this.addPost();\n      }\n\n      localStorage.removeItem('post_create_title');\n      localStorage.removeItem('post_create_message');\n      if (this.data.onComplete) {\n        this.data.onComplete(post);\n      }\n      this.creationInProgress = false;\n    } catch (e) {\n      this.snackbarService.queueSnackbar(\n        'Unable to create post. Please refresh and try again!'\n      );\n    } finally {\n      this.dialogRef.close();\n    }\n  }\n\n  defaultPostFill() {\n    return this.userService.user?.role === Role.TEACHER\n      ? TEACHER_POST_COLOR\n      : STUDENT_POST_COLOR;\n  }\n\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n}\n","<h1 mat-dialog-title *ngIf=\"!editingPost\">Add Post</h1>\n<h1 mat-dialog-title *ngIf=\"editingPost\">Update Post</h1>\n<div mat-dialog-content>\n  <div style=\"margin-bottom: 10px\">\n    <mat-radio-group\n      *ngIf=\"boardType === 'QUESTION_AUTHORING' && !editingPost\"\n      [(ngModel)]=\"contentType\"\n    >\n      <mat-radio-button style=\"margin-left: 10px\" value=\"OPEN_RESPONSE_MESSAGE\">\n        Open Response\n      </mat-radio-button>\n      <mat-radio-button style=\"margin-left: 10px\" value=\"MULTIPLE_CHOICE\">\n        Multiple Choice\n      </mat-radio-button>\n    </mat-radio-group>\n  </div>\n  <mat-form-field appearance=\"fill\" style=\"width: 100%\">\n    <mat-label>Title</mat-label>\n    <input\n      name=\"title\"\n      [appAutofocus]=\"true\"\n      [formControl]=\"titleControl\"\n      [errorStateMatcher]=\"matcher\"\n      matInput\n      autocomplete=\"off\"\n      [(ngModel)]=\"title\"\n    />\n    <mat-error *ngIf=\"!title\"> Title is <strong>required</strong> </mat-error>\n    <mat-error *ngIf=\"title && title.length > 50\">\n      Title is <strong>too long!</strong>\n    </mat-error>\n  </mat-form-field>\n\n  <div *ngIf=\"contentType === 'OPEN_RESPONSE_MESSAGE'\">\n    <mat-form-field appearance=\"fill\" style=\"width: 100%\">\n      <mat-label *ngIf=\"boardType === 'QUESTION_AUTHORING'\">\n        Add open response question prompt\n      </mat-label>\n      <mat-label *ngIf=\"boardType === 'BRAINSTORMING'\"> Message </mat-label>\n      <textarea\n        [formControl]=\"\n          boardType === 'BRAINSTORMING' ? msgControl : questionPromptControl\n        \"\n        [errorStateMatcher]=\"matcher\"\n        matInput\n        rows=\"5\"\n        cols=\"40\"\n        [(ngModel)]=\"message\"\n      ></textarea>\n      <mat-error *ngIf=\"boardType === 'QUESTION_AUTHORING' && !message\">\n        Question Prompt is <strong>required</strong>\n      </mat-error>\n      <mat-error\n        *ngIf=\"\n          boardType === 'BRAINSTORMING' && message && message.length > 2000\n        \"\n      >\n        Message is <strong>too long!</strong>\n      </mat-error>\n      <mat-error\n        *ngIf=\"\n          boardType === 'QUESTION_AUTHORING' && message && message.length > 2000\n        \"\n      >\n        Question Prompt is <strong>too long!</strong>\n      </mat-error>\n    </mat-form-field>\n  </div>\n\n  <div *ngIf=\"contentType === 'MULTIPLE_CHOICE'\" style=\"position: relative\">\n    <div>\n      <mat-form-field appearance=\"fill\" style=\"width: 100%\">\n        <mat-label> Multiple Choice Question Prompt </mat-label>\n        <input\n          name=\"message\"\n          [formControl]=\"questionPromptControl\"\n          [errorStateMatcher]=\"matcher\"\n          matInput\n          [(ngModel)]=\"message\"\n        />\n        <mat-error *ngIf=\"!message\">\n          Question Prompt is <strong>required</strong>\n        </mat-error>\n        <mat-error *ngIf=\"message && message.length > 2000\">\n          Prompt is <strong>too long!</strong>\n        </mat-error>\n      </mat-form-field>\n      <div style=\"display: flex; text-align: center\">\n        <mat-form-field appearance=\"outline\" style=\"width: 100%\">\n          <mat-label>New Multiple Choice Option</mat-label>\n          <input matInput [(ngModel)]=\"newMultipleChoiceOptionTest\" />\n          <mat-hint class=\"mat-error\" *ngIf=\"multipleChoiceOptions.length < 2\">\n            Multiple Choice Options required.\n          </mat-hint>\n        </mat-form-field>\n        <button\n          mat-mini-fab\n          *ngIf=\"multipleChoiceOptions.length < 6\"\n          style=\"margin: 0 10px\"\n          color=\"accent\"\n          [disabled]=\"\n            !newMultipleChoiceOptionTest || multipleChoiceOptions.length > 6\n          \"\n          matTooltip=\"Add Multiple Choice Option\"\n          matTooltipPosition=\"before\"\n          (click)=\"addMultipleChoiceButton()\"\n        >\n          <mat-icon>add</mat-icon>\n        </button>\n      </div>\n    </div>\n    <div>\n      <mat-hint\n        class=\"mat-error\"\n        *ngIf=\"\n          multipleChoiceOptions.length > 1 && !correctMultipleChoiceSelected\n        \"\n      >\n        Select correct multiple choice option.\n      </mat-hint>\n      <mat-card\n        *ngFor=\"let multipleChoice of multipleChoiceOptions\"\n        style=\"\n          display: flex;\n          margin: 10px;\n          padding: 10px;\n          justify-content: space-between;\n        \"\n        [ngStyle]=\"{\n          'background-color': multipleChoice.correct ? '#39e75f' : 'white'\n        }\"\n      >\n        <mat-card-title style=\"font-size: small; margin: auto 0\">\n          {{ multipleChoice.optionTitle }}\n        </mat-card-title>\n        <div>\n          <button\n            mat-mini-fab\n            style=\"margin: 0 10px\"\n            color=\"accent\"\n            matTooltip=\"Delete\"\n            matTooltipPosition=\"before\"\n            (click)=\"removeMultipleChoiceOption($event, multipleChoice)\"\n          >\n            <mat-icon class=\"editMultipleChoiceOptions\"> delete </mat-icon>\n          </button>\n          <button\n            mat-mini-fab\n            style=\"margin: 0 10px\"\n            color=\"accent\"\n            matTooltip=\"Correct Option\"\n            matTooltipPosition=\"before\"\n            (click)=\"multipleChoiceAnswer($event, multipleChoice)\"\n          >\n            <mat-icon class=\"editMultipleChoiceOptions\">\n              check_circle_outline\n            </mat-icon>\n          </button>\n        </div>\n      </mat-card>\n    </div>\n  </div>\n  <mat-hint class=\"mat-error\" *ngIf=\"tagRequired && tags.length === 0\"> One or more tags <strong>required</strong> </mat-hint>\n  <mat-form-field *ngIf=\"!editingPost\" class=\"tag-form\" appearance=\"standard\">\n    <mat-chip-list #chipList>\n      <mat-chip style=\"background-color: #78c2c0\" [matMenuTriggerFor]=\"menu1\">\n        Add Tag\n        <mat-icon>add</mat-icon>\n      </mat-chip>\n      <mat-chip\n        [ngStyle]=\"{ 'background-color': tag.color }\"\n        *ngFor=\"let tag of tags\"\n      >\n        {{ tag.name }}\n        <mat-icon class=\"cancel\" (click)=\"removeTag(tag)\">cancel</mat-icon>\n      </mat-chip>\n      <mat-menu #menu1=\"matMenu\">\n        <div mat-menu-item *ngIf=\"tagOptions && tagOptions.length === 0\">\n          No tags available.\n        </div>\n        <div\n          mat-menu-item\n          (click)=\"addTag($event, tagOption)\"\n          *ngFor=\"let tagOption of tagOptions\"\n        >\n          {{ tagOption.name }}\n        </div>\n      </mat-menu>\n    </mat-chip-list>\n  </mat-form-field>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onNoClick()\">Cancel</button>\n  <button\n    *ngIf=\"!editingPost\"\n    type=\"submit\"\n    [class.spinner]=\"this.creationInProgress\"\n    [disabled]=\"disabled() || this.creationInProgress || (tagRequired && tags.length === 0)\"\n    mat-button\n    (click)=\"handleDialogSubmit()\"\n    cdkFocusInitial\n  >\n    Add Post\n  </button>\n  <button\n    *ngIf=\"!editingPost && user.role === 'TEACHER' && board.scope === 'PROJECT_PERSONAL'\"\n    type=\"submit\"\n    [disabled]=\"disabled()\"\n    mat-button\n    (click)=\"handlePersonalBoardCopy()\"\n    cdkFocusInitial\n  >\n    Copy to All Students' Personal Boards\n  </button>\n  <button\n    *ngIf=\"editingPost\"\n    type=\"submit\"\n    [disabled]=\"disabled()\"\n    mat-button\n    (click)=\"updateMultipleChoicePost()\"\n    cdkFocusInitial\n  >\n    Update Post\n  </button>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}