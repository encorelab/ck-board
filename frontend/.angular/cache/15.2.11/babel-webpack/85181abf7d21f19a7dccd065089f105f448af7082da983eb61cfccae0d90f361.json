{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { SnackBarComponent } from '../components/snackbar/snackbar.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/snack-bar\";\nexport class SnackbarService {\n  constructor(snackBar) {\n    this.snackBar = snackBar;\n    this.snackBarQueue = new BehaviorSubject([]);\n    this.snackBarQueue$ = this.snackBarQueue.asObservable();\n    let alreadyDismissed = false;\n    this.snackBarQueue$.subscribe(e => {\n      var _a;\n      if (!alreadyDismissed && this.snackBar._openedSnackBarRef) {\n        this.snackBar.dismiss();\n      }\n      alreadyDismissed = false;\n      const nextIndex = e.length - 1;\n      if (nextIndex >= 0) {\n        const next = e[nextIndex];\n        this.openSnackbar(next);\n        (_a = this.snackBar._openedSnackBarRef) === null || _a === void 0 ? void 0 : _a.afterDismissed().subscribe(close => {\n          if (close.dismissedByAction) {\n            alreadyDismissed = true;\n            this.dequeueSnackbar();\n          }\n        });\n      }\n    });\n  }\n  queueSnackbar(title, description = '', configParams = {}) {\n    this.snackBarQueue.next(this.snackBarQueue.value.concat([{\n      title,\n      description,\n      configParams\n    }]));\n  }\n  dequeueSnackbar() {\n    this.snackBarQueue.value.pop();\n    this.snackBarQueue.next(this.snackBarQueue.value);\n  }\n  snackbarIsOpen() {\n    return Boolean(this.snackBar._openedSnackBarRef);\n  }\n  openSnackbar(item) {\n    var _a;\n    const config = (_a = item.configParams.matSnackbarConfig) !== null && _a !== void 0 ? _a : {};\n    config.data = {\n      title: item.title,\n      description: item.description,\n      action: item.configParams.action,\n      close: () => {\n        var _a;\n        return (_a = this.snackBar._openedSnackBarRef) === null || _a === void 0 ? void 0 : _a.dismissWithAction();\n      }\n    };\n    config.duration = 5000;\n    this.snackBar.openFromComponent(SnackBarComponent, config);\n  }\n  ngOnDestroy() {\n    this.snackBarQueue.next([]);\n  }\n}\nSnackbarService.ɵfac = function SnackbarService_Factory(t) {\n  return new (t || SnackbarService)(i0.ɵɵinject(i1.MatSnackBar));\n};\nSnackbarService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: SnackbarService,\n  factory: SnackbarService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,eAAe,QAAQ,MAAM;AACtC,SAASC,iBAAiB,QAAQ,2CAA2C;;;AAqB7E,OAAM,MAAOC,eAAe;EAI1BC,YAAoBC,QAAqB;IAArB,aAAQ,GAARA,QAAQ;IAHX,kBAAa,GAAG,IAAIJ,eAAe,CAAsB,EAAE,CAAC;IAC5D,mBAAc,GAAG,IAAI,CAACK,aAAa,CAACC,YAAY,EAAE;IAGjE,IAAIC,gBAAgB,GAAG,KAAK;IAE5B,IAAI,CAACC,cAAc,CAACC,SAAS,CAAEC,CAAC,IAAI;;MAClC,IAAI,CAACH,gBAAgB,IAAI,IAAI,CAACH,QAAQ,CAACO,kBAAkB,EAAE;QACzD,IAAI,CAACP,QAAQ,CAACQ,OAAO,EAAE;;MAEzBL,gBAAgB,GAAG,KAAK;MAExB,MAAMM,SAAS,GAAGH,CAAC,CAACI,MAAM,GAAG,CAAC;MAC9B,IAAID,SAAS,IAAI,CAAC,EAAE;QAClB,MAAME,IAAI,GAAGL,CAAC,CAACG,SAAS,CAAC;QACzB,IAAI,CAACG,YAAY,CAACD,IAAI,CAAC;QACvB,UAAI,CAACX,QAAQ,CAACO,kBAAkB,0CAC5BM,cAAc,GACfR,SAAS,CAAES,KAAK,IAAI;UACnB,IAAIA,KAAK,CAACC,iBAAiB,EAAE;YAC3BZ,gBAAgB,GAAG,IAAI;YACvB,IAAI,CAACa,eAAe,EAAE;;QAE1B,CAAC,CAAC;;IAER,CAAC,CAAC;EACJ;EAEAC,aAAa,CACXC,KAAa,EACbC,WAAW,GAAG,EAAE,EAChBC,eAA+B,EAAE;IAEjC,IAAI,CAACnB,aAAa,CAACU,IAAI,CACrB,IAAI,CAACV,aAAa,CAACoB,KAAK,CAACC,MAAM,CAAC,CAAC;MAAEJ,KAAK;MAAEC,WAAW;MAAEC;IAAY,CAAE,CAAC,CAAC,CACxE;EACH;EAEAJ,eAAe;IACb,IAAI,CAACf,aAAa,CAACoB,KAAK,CAACE,GAAG,EAAE;IAC9B,IAAI,CAACtB,aAAa,CAACU,IAAI,CAAC,IAAI,CAACV,aAAa,CAACoB,KAAK,CAAC;EACnD;EAEAG,cAAc;IACZ,OAAOC,OAAO,CAAC,IAAI,CAACzB,QAAQ,CAACO,kBAAkB,CAAC;EAClD;EAEQK,YAAY,CAACc,IAAuB;;IAC1C,MAAMC,MAAM,GAAG,UAAI,CAACP,YAAY,CAACQ,iBAAiB,mCAAI,EAAE;IACxDD,MAAM,CAACE,IAAI,GAAG;MACZX,KAAK,EAAEQ,IAAI,CAACR,KAAK;MACjBC,WAAW,EAAEO,IAAI,CAACP,WAAW;MAC7BW,MAAM,EAAEJ,IAAI,CAACN,YAAY,CAACU,MAAM;MAChChB,KAAK,EAAE,MAAK;QAAA;QAAC,iBAAI,CAACd,QAAQ,CAACO,kBAAkB,0CAAEwB,iBAAiB,EAAE;MAAA;KACnE;IACDJ,MAAM,CAACK,QAAQ,GAAG,IAAI;IAEtB,IAAI,CAAChC,QAAQ,CAACiC,iBAAiB,CAACpC,iBAAiB,EAAE8B,MAAM,CAAC;EAC5D;EAEAO,WAAW;IACT,IAAI,CAACjC,aAAa,CAACU,IAAI,CAAC,EAAE,CAAC;EAC7B;;;mBA/DWb,eAAe;AAAA;;SAAfA,eAAe;EAAAqC,SAAfrC,eAAe;EAAAsC,YAFd;AAAM","names":["BehaviorSubject","SnackBarComponent","SnackbarService","constructor","snackBar","snackBarQueue","asObservable","alreadyDismissed","snackBarQueue$","subscribe","e","_openedSnackBarRef","dismiss","nextIndex","length","next","openSnackbar","afterDismissed","close","dismissedByAction","dequeueSnackbar","queueSnackbar","title","description","configParams","value","concat","pop","snackbarIsOpen","Boolean","item","config","matSnackbarConfig","data","action","dismissWithAction","duration","openFromComponent","ngOnDestroy","factory","providedIn"],"sourceRoot":"","sources":["/Users/marieklinaeva/github/ck-board/frontend/src/app/services/snackbar.service.ts"],"sourcesContent":["import { Injectable, OnDestroy } from '@angular/core';\nimport { MatSnackBar, MatSnackBarConfig } from '@angular/material/snack-bar';\nimport { BehaviorSubject } from 'rxjs';\nimport { SnackBarComponent } from '../components/snackbar/snackbar.component';\n\nexport interface SnackbarConfig {\n  matSnackbarConfig?: MatSnackBarConfig;\n  action?: Action;\n}\n\nexport interface Action {\n  name: string;\n  run: Function;\n}\n\nexport interface SnackBarQueueItem {\n  title: string;\n  description: string;\n  configParams: SnackbarConfig;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SnackbarService implements OnDestroy {\n  private readonly snackBarQueue = new BehaviorSubject<SnackBarQueueItem[]>([]);\n  private readonly snackBarQueue$ = this.snackBarQueue.asObservable();\n\n  constructor(private snackBar: MatSnackBar) {\n    let alreadyDismissed = false;\n\n    this.snackBarQueue$.subscribe((e) => {\n      if (!alreadyDismissed && this.snackBar._openedSnackBarRef) {\n        this.snackBar.dismiss();\n      }\n      alreadyDismissed = false;\n\n      const nextIndex = e.length - 1;\n      if (nextIndex >= 0) {\n        const next = e[nextIndex];\n        this.openSnackbar(next);\n        this.snackBar._openedSnackBarRef\n          ?.afterDismissed()\n          .subscribe((close) => {\n            if (close.dismissedByAction) {\n              alreadyDismissed = true;\n              this.dequeueSnackbar();\n            }\n          });\n      }\n    });\n  }\n\n  queueSnackbar(\n    title: string,\n    description = '',\n    configParams: SnackbarConfig = {}\n  ) {\n    this.snackBarQueue.next(\n      this.snackBarQueue.value.concat([{ title, description, configParams }])\n    );\n  }\n\n  dequeueSnackbar() {\n    this.snackBarQueue.value.pop();\n    this.snackBarQueue.next(this.snackBarQueue.value);\n  }\n\n  snackbarIsOpen(): boolean {\n    return Boolean(this.snackBar._openedSnackBarRef);\n  }\n\n  private openSnackbar(item: SnackBarQueueItem) {\n    const config = item.configParams.matSnackbarConfig ?? {};\n    config.data = {\n      title: item.title,\n      description: item.description,\n      action: item.configParams.action,\n      close: () => this.snackBar._openedSnackBarRef?.dismissWithAction(),\n    };\n    config.duration = 5000;\n\n    this.snackBar.openFromComponent(SnackBarComponent, config);\n  }\n\n  ngOnDestroy(): void {\n    this.snackBarQueue.next([]);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}