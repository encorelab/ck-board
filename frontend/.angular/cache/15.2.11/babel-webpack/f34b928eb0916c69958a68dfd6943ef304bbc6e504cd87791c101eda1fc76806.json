{"ast":null,"code":"import _asyncToGenerator from \"/Users/marieklinaeva/github/ck-board/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { MyErrorStateMatcher } from 'src/app/utils/ErrorStateMatcher';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/legacy-button\";\nimport * as i6 from \"@angular/material/legacy-form-field\";\nimport * as i7 from \"@angular/material/legacy-input\";\nfunction LoginComponent_p_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 18);\n    i0.ɵɵtext(1, \" Invalid email or password! \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginComponent {\n  userService;\n  router;\n  email;\n  password;\n  matcher = new MyErrorStateMatcher();\n  invalidCredentials = false;\n  constructor(userService, router) {\n    this.userService = userService;\n    this.router = router;\n    if (this.userService.loggedIn) {\n      this.router.navigate(['/dashboard']);\n    }\n  }\n  onLogin() {\n    var _this = this;\n    this.userService.login(this.email, this.password).then( /*#__PURE__*/_asyncToGenerator(function* () {\n      _this.invalidCredentials = false;\n      const redirectUrl = _this.userService.redirectUrl;\n      _this.userService.redirectUrl = null;\n      if (redirectUrl) {\n        // Parse query parameters (if they exist)\n        const searchParams = redirectUrl.indexOf('?') != -1 ? new URLSearchParams(redirectUrl.substring(redirectUrl.indexOf('?'))) : [];\n        _this.router.navigate([`${redirectUrl.split('?')[0]}`], {\n          queryParams: [...searchParams].reduce((o, [key, value]) => {\n            o[key] = value;\n            return o;\n          }, {}),\n          queryParamsHandling: 'merge'\n        });\n      } else {\n        _this.router.navigate(['dashboard']);\n      }\n    })).catch(() => {\n      this.invalidCredentials = true;\n    });\n  }\n  static ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 26,\n    vars: 3,\n    consts: [[1, \"wrapper\"], [1, \"container\"], [1, \"form-image-wrapper\"], [\"src\", \"../../assets/Login.png\", \"alt\", \"CK Board login picture\", 1, \"form-image\"], [1, \"form-container\"], [1, \"form\", 3, \"ngSubmit\"], [1, \"welcome\"], [\"src\", \"/assets/encore-logo.png\", \"alt\", \"Encore Lab logo\", 1, \"logo\"], [1, \"header\"], [1, \"credentials-container\"], [\"appearance\", \"fill\"], [\"autocomplete\", \"username\", \"type\", \"email\", \"matInput\", \"\", \"name\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [\"autocomplete\", \"current-password\", \"type\", \"password\", \"matInput\", \"\", \"name\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"invalid-pass\", 4, \"ngIf\"], [1, \"next\"], [\"type\", \"submit\", \"mat-button\", \"\"], [1, \"alternate\"], [\"routerLink\", \"/register\"], [1, \"invalid-pass\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"form\", 5);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_5_listener() {\n          return ctx.onLogin();\n        });\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelement(7, \"img\", 7);\n        i0.ɵɵelementStart(8, \"h1\", 8);\n        i0.ɵɵtext(9, \"Common Knowledge Board\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 9)(11, \"mat-form-field\", 10)(12, \"mat-label\");\n        i0.ɵɵtext(13, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.email = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"mat-form-field\", 10)(16, \"mat-label\");\n        i0.ɵɵtext(17, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(19, LoginComponent_p_19_Template, 2, 0, \"p\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 14)(21, \"button\", 15);\n        i0.ɵɵtext(22, \"Login\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"p\", 16)(24, \"a\", 17);\n        i0.ɵɵtext(25, \"Don't have an account? Sign up here!\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.email);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.invalidCredentials);\n      }\n    },\n    dependencies: [i3.NgIf, i2.RouterLink, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm, i5.MatLegacyButton, i6.MatLegacyFormField, i6.MatLegacyLabel, i7.MatLegacyInput],\n    styles: [\".wrapper[_ngcontent-%COMP%] {\\n  background-color: #3f3d56;\\n  min-height: 100vh;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  max-width: 600px;\\n  width: 100%;\\n  margin: 32px;\\n  display: flex;\\n  flex-direction: column;\\n}\\n@media (min-width: 960px) {\\n  .container[_ngcontent-%COMP%] {\\n    flex-direction: row;\\n    max-width: 1280px;\\n  }\\n}\\n\\n.form-image-wrapper[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n@media (min-width: 960px) {\\n  .form-image-wrapper[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%] {\\n    flex: 1 1 50%;\\n  }\\n}\\n\\n.form-image-wrapper[_ngcontent-%COMP%] {\\n  background-color: #090040;\\n}\\n@media (max-width: 959.98px) {\\n  .form-image-wrapper[_ngcontent-%COMP%] {\\n    display: none;\\n  }\\n}\\n\\n.form-image[_ngcontent-%COMP%] {\\n  max-width: 100%;\\n  height: auto;\\n}\\n\\n.form-container[_ngcontent-%COMP%] {\\n  background-color: #ffffff;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  align-items: stretch;\\n}\\n.form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-weight: 400;\\n  margin-bottom: 20px;\\n}\\n\\n.form[_ngcontent-%COMP%] {\\n  padding: 32px;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.form[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\\n  align-items: stretch;\\n  justify-content: center;\\n}\\n\\n.header[_ngcontent-%COMP%] {\\n  font-weight: normal;\\n  margin-bottom: 40px;\\n  text-align: center;\\n}\\n\\n.next[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  margin-top: 24px;\\n}\\n.next[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 50px;\\n  outline: none;\\n  border: none;\\n  font-size: 24px;\\n  color: white;\\n  opacity: 0.8;\\n  background-color: #6c63ff;\\n}\\n.next[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n  cursor: pointer;\\n  opacity: 1;\\n  transition: 0.2s;\\n}\\n\\n.credentials-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.alternate[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n  text-align: center;\\n  margin-top: 36px;\\n}\\n\\n.welcome[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n  margin-bottom: 20px;\\n}\\n\\n.logo[_ngcontent-%COMP%] {\\n  max-height: 100px;\\n  width: auto;\\n}\\n\\n.invalid-pass[_ngcontent-%COMP%] {\\n  color: red;\\n  text-align: center;\\n}\\n\\n.forgot-pass[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  text-align: center;\\n  margin: 0 0;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9zdHlsZS9sYXlvdXQvX2xvZ2luLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvYXBwL2NvbXBvbmVudHMvbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDRSx5QkFBQTtFQUNBLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUNERjs7QURJQTtFQUNFLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7QUNERjtBREdFO0VBUEY7SUFRSSxtQkFBQTtJQUNBLGlCQUFBO0VDQUY7QUFDRjs7QURHQTs7RUFFRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtBQ0FGO0FERUU7RUFORjs7SUFPSSxhQUFBO0VDRUY7QUFDRjs7QURDQTtFQUNFLHlCQUFBO0FDRUY7QURBRTtFQUhGO0lBSUksYUFBQTtFQ0dGO0FBQ0Y7O0FEQUE7RUFDRSxlQUFBO0VBQ0EsWUFBQTtBQ0dGOztBREFBO0VBQ0UseUJBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSw4QkFBQTtFQUNBLG9CQUFBO0FDR0Y7QURERTtFQUNFLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtBQ0dKOztBRENBO0VBQ0UsYUFBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtBQ0VGOztBRENBO0VBQ0Usb0JBQUE7RUFDQSx1QkFBQTtBQ0VGOztBRENBO0VBQ0UsbUJBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0FDRUY7O0FEQ0E7RUFDRSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxnQkFBQTtBQ0VGO0FEQUU7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7QUNFSjtBRENFO0VBQ0UsZUFBQTtFQUNBLFVBQUE7RUFDQSxnQkFBQTtBQ0NKOztBREdBO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtBQ0FGOztBREdBO0VBQ0UsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7QUNBRjs7QUE3R0E7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsbUJBQUE7QUFnSEY7O0FBN0dBO0VBQ0UsaUJBQUE7RUFDQSxXQUFBO0FBZ0hGOztBQTdHQTtFQUNFLFVBQUE7RUFDQSxrQkFBQTtBQWdIRjs7QUE3R0E7RUFDRSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxXQUFBO0FBZ0hGIiwic291cmNlc0NvbnRlbnQiOlsiQHVzZSAnLi4vYmFzZScgYXMgKjtcblxuLndyYXBwZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjM2YzZDU2O1xuICBtaW4taGVpZ2h0OiAxMDB2aDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi5jb250YWluZXIge1xuICBtYXgtd2lkdGg6IDYwMHB4O1xuICB3aWR0aDogMTAwJTtcbiAgbWFyZ2luOiAzMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuXG4gIEBtZWRpYSAobWluLXdpZHRoOiBicmVha3BvaW50KCdtZCcsICdtaW4nKSkge1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgbWF4LXdpZHRoOiBicmVha3BvaW50KCdsZycsICdtaW4nKTtcbiAgfVxufVxuXG4uZm9ybS1pbWFnZS13cmFwcGVyLFxuLmZvcm0tY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgQG1lZGlhIChtaW4td2lkdGg6IGJyZWFrcG9pbnQoJ21kJywgJ21pbicpKSB7XG4gICAgZmxleDogMSAxIDUwJTtcbiAgfVxufVxuXG4uZm9ybS1pbWFnZS13cmFwcGVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzA5MDA0MDtcblxuICBAbWVkaWEgKG1heC13aWR0aDogYnJlYWtwb2ludCgnc20nLCAnbWF4JykpIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbi5mb3JtLWltYWdlIHtcbiAgbWF4LXdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGF1dG87XG59XG5cbi5mb3JtLWNvbnRhaW5lciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG5cbiAgaDIge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LXdlaWdodDogNDAwO1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIH1cbn1cblxuLmZvcm0ge1xuICBwYWRkaW5nOiAzMnB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4uZm9ybSA+ICoge1xuICBhbGlnbi1pdGVtczogc3RyZXRjaDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5oZWFkZXIge1xuICBmb250LXdlaWdodDogbm9ybWFsO1xuICBtYXJnaW4tYm90dG9tOiA0MHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5uZXh0IHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1hcmdpbi10b3A6IDI0cHg7XG5cbiAgYnV0dG9uIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDUwcHg7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgZm9udC1zaXplOiAyNHB4O1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBvcGFjaXR5OiAwLjg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzZjNjNmZjtcbiAgfVxuXG4gIGJ1dHRvbjpob3ZlciB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNpdGlvbjogMC4ycztcbiAgfVxufVxuXG4uY3JlZGVudGlhbHMtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi5hbHRlcm5hdGUge1xuICBmb250LXNpemU6IDIwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogMzZweDtcbn1cbiIsIkB1c2UgJy4uLy4uLy4uL3N0eWxlL2xheW91dC9sb2dpbic7XG5cbi53ZWxjb21lIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cbi5sb2dvIHtcbiAgbWF4LWhlaWdodDogMTAwcHg7XG4gIHdpZHRoOiBhdXRvO1xufVxuXG4uaW52YWxpZC1wYXNzIHtcbiAgY29sb3I6IHJlZDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uZm9yZ290LXBhc3Mge1xuICBmb250LXNpemU6IDE2cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luOiAwIDA7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":";AAGA,SAASA,mBAAmB,QAAQ,iCAAiC;;;;;;;;;;;ICqC3DC,6BAAmD;IACjDA,4CACF;IAAAA,iBAAI;;;ADhCd,OAAM,MAAOC,cAAc;EAQLC;EAAkCC;EAPtDC,KAAK;EACLC,QAAQ;EAERC,OAAO,GAAG,IAAIP,mBAAmB,EAAE;EAEnCQ,kBAAkB,GAAG,KAAK;EAE1BC,YAAoBN,WAAwB,EAAUC,MAAc;IAAhD,gBAAW,GAAXD,WAAW;IAAuB,WAAM,GAANC,MAAM;IAC1D,IAAI,IAAI,CAACD,WAAW,CAACO,QAAQ,EAAE;MAC7B,IAAI,CAACN,MAAM,CAACO,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;;EAExC;EAEAC,OAAO;IAAA;IACL,IAAI,CAACT,WAAW,CACbU,KAAK,CAAC,IAAI,CAACR,KAAK,EAAE,IAAI,CAACC,QAAQ,CAAC,CAChCQ,IAAI,iCAAC,aAAW;MACf,KAAI,CAACN,kBAAkB,GAAG,KAAK;MAC/B,MAAMO,WAAW,GAAG,KAAI,CAACZ,WAAW,CAACY,WAAW;MAChD,KAAI,CAACZ,WAAW,CAACY,WAAW,GAAG,IAAI;MACnC,IAAIA,WAAW,EAAE;QACf;QACA,MAAMC,YAAY,GAChBD,WAAW,CAACE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAC1B,IAAIC,eAAe,CACjBH,WAAW,CAACI,SAAS,CAACJ,WAAW,CAACE,OAAO,CAAC,GAAG,CAAC,CAAC,CAChD,GACD,EAAE;QAER,KAAI,CAACb,MAAM,CAACO,QAAQ,CAAC,CAAC,GAAGI,WAAW,CAACK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;UACrDC,WAAW,EAAE,CAAC,GAAGL,YAAY,CAAC,CAACM,MAAM,CAAC,CAACC,CAAC,EAAE,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAI;YACxDF,CAAC,CAACC,GAAG,CAAC,GAAGC,KAAK;YACd,OAAOF,CAAC;UACV,CAAC,EAAE,EAAE,CAAC;UACNG,mBAAmB,EAAE;SACtB,CAAC;OACH,MAAM;QACL,KAAI,CAACtB,MAAM,CAACO,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;;IAEvC,CAAC,EAAC,CACDgB,KAAK,CAAC,MAAK;MACV,IAAI,CAACnB,kBAAkB,GAAG,IAAI;IAChC,CAAC,CAAC;EACN;;qBA5CWN,cAAc;EAAA;;UAAdA,cAAc;IAAA0B;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCV3B/B,8BAAqB;QAGfA,yBAIE;QACJA,iBAAM;QACNA,8BAA4B;QACPA;UAAA,OAAYgC,aAAS;QAAA,EAAC;QACvChC,8BAAqB;QACnBA,yBAIE;QACFA,6BAAmB;QAAAA,sCAAsB;QAAAA,iBAAK;QAEhDA,+BAAmC;QAEpBA,sBAAK;QAAAA,iBAAY;QAC5BA,kCAME;QAFAA;UAAA;QAAA,EAAmB;QAJrBA,iBAME;QAEJA,2CAAkC;QACrBA,yBAAQ;QAAAA,iBAAY;QAC/BA,kCAME;QAFAA;UAAA;QAAA,EAAsB;QAJxBA,iBAME;QAEJA,8DAEI;QACNA,iBAAM;QACNA,gCAAkB;QACiBA,sBAAK;QAAAA,iBAAS;QAEjDA,8BAAqB;QACOA,qDAAoC;QAAAA,iBAAI;;;QAtB9DA,gBAAmB;QAAnBA,mCAAmB;QAUnBA,eAAsB;QAAtBA,sCAAsB;QAItBA,eAAwB;QAAxBA,6CAAwB","names":["MyErrorStateMatcher","i0","LoginComponent","userService","router","email","password","matcher","invalidCredentials","constructor","loggedIn","navigate","onLogin","login","then","redirectUrl","searchParams","indexOf","URLSearchParams","substring","split","queryParams","reduce","o","key","value","queryParamsHandling","catch","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/marieklinaeva/github/ck-board/frontend/src/app/components/login/login.component.ts","/Users/marieklinaeva/github/ck-board/frontend/src/app/components/login/login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { UserService } from 'src/app/services/user.service';\nimport { MyErrorStateMatcher } from 'src/app/utils/ErrorStateMatcher';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n})\nexport class LoginComponent {\n  email: string;\n  password: string;\n\n  matcher = new MyErrorStateMatcher();\n\n  invalidCredentials = false;\n\n  constructor(private userService: UserService, private router: Router) {\n    if (this.userService.loggedIn) {\n      this.router.navigate(['/dashboard']);\n    }\n  }\n\n  onLogin() {\n    this.userService\n      .login(this.email, this.password)\n      .then(async () => {\n        this.invalidCredentials = false;\n        const redirectUrl = this.userService.redirectUrl;\n        this.userService.redirectUrl = null;\n        if (redirectUrl) {\n          // Parse query parameters (if they exist)\n          const searchParams =\n            redirectUrl.indexOf('?') != -1\n              ? new URLSearchParams(\n                  redirectUrl.substring(redirectUrl.indexOf('?'))\n                )\n              : [];\n\n          this.router.navigate([`${redirectUrl.split('?')[0]}`], {\n            queryParams: [...searchParams].reduce((o, [key, value]) => {\n              o[key] = value;\n              return o;\n            }, {}),\n            queryParamsHandling: 'merge',\n          });\n        } else {\n          this.router.navigate(['dashboard']);\n        }\n      })\n      .catch(() => {\n        this.invalidCredentials = true;\n      });\n  }\n}\n","<div class=\"wrapper\">\n  <div class=\"container\">\n    <div class=\"form-image-wrapper\">\n      <img\n        class=\"form-image\"\n        src=\"../../assets/Login.png\"\n        alt=\"CK Board login picture\"\n      />\n    </div>\n    <div class=\"form-container\">\n      <form class=\"form\" (ngSubmit)=\"onLogin()\">\n        <div class=\"welcome\">\n          <img\n            class=\"logo\"\n            src=\"/assets/encore-logo.png\"\n            alt=\"Encore Lab logo\"\n          />\n          <h1 class=\"header\">Common Knowledge Board</h1>\n        </div>\n        <div class=\"credentials-container\">\n          <mat-form-field appearance=\"fill\">\n            <mat-label>Email</mat-label>\n            <input\n              autocomplete=\"username\"\n              type=\"email\"\n              matInput\n              [(ngModel)]=\"email\"\n              name=\"username\"\n            />\n          </mat-form-field>\n          <mat-form-field appearance=\"fill\">\n            <mat-label>Password</mat-label>\n            <input\n              autocomplete=\"current-password\"\n              type=\"password\"\n              matInput\n              [(ngModel)]=\"password\"\n              name=\"password\"\n            />\n          </mat-form-field>\n          <p *ngIf=\"invalidCredentials\" class=\"invalid-pass\">\n            Invalid email or password!\n          </p>\n        </div>\n        <div class=\"next\">\n          <button type=\"submit\" mat-button>Login</button>\n        </div>\n        <p class=\"alternate\">\n          <a routerLink=\"/register\">Don't have an account? Sign up here!</a>\n        </p>\n      </form>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}