{"ast":null,"code":"import _asyncToGenerator from \"/Users/marieklinaeva/github/ck-board/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Role } from 'src/app/models/user';\nimport { AddBoardModalComponent } from '../add-board-modal/add-board-modal.component';\nimport { AddProjectModalComponent } from '../add-project-modal/add-project-modal.component';\nimport { JoinProjectModalComponent } from '../join-project-modal/join-project-modal.component';\nimport { ProjectConfigurationModalComponent } from '../project-configuration-modal/project-configuration-modal.component';\nimport { ConfirmModalComponent } from '../confirm-modal/confirm-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"src/app/services/board.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"src/app/services/project.service\";\nfunction DashboardComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 12)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"add\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r1 = i0.ɵɵreference(7);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r1);\n  }\n}\nfunction DashboardComponent_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.openCreateBoardDialog());\n    });\n    i0.ɵɵtext(1, \" Create Board \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_ng_container_18_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_ng_container_18_button_8_Template_button_click_0_listener($event) {\n      return $event.stopPropagation();\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \" more_vert \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r8 = i0.ɵɵreference(10);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r8);\n  }\n}\nfunction DashboardComponent_ng_container_18_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"0 members\");\n  }\n}\nfunction DashboardComponent_ng_container_18_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"1 member\");\n  }\n}\nfunction DashboardComponent_ng_container_18_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n  if (rf & 2) {\n    const project_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵtextInterpolate(project_r6.members.length + \" members\");\n  }\n}\nfunction DashboardComponent_ng_container_18_ng_template_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"0 boards\");\n  }\n}\nfunction DashboardComponent_ng_container_18_ng_template_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"1 board\");\n  }\n}\nfunction DashboardComponent_ng_container_18_ng_template_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n  if (rf & 2) {\n    const project_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵtextInterpolate(project_r6.boards.length + \" boards\");\n  }\n}\nfunction DashboardComponent_ng_container_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-card\", 13);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_ng_container_18_Template_mat_card_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const project_r6 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.handleProjectClick(project_r6.projectID));\n    })(\"keyup.enter\", function DashboardComponent_ng_container_18_Template_mat_card_keyup_enter_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const project_r6 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.handleProjectClick(project_r6.projectID));\n    });\n    i0.ɵɵelementStart(2, \"div\", 14)(3, \"mat-card-title\", 15)(4, \"mat-icon\", 16);\n    i0.ɵɵtext(5, \"grid_view\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, DashboardComponent_ng_container_18_button_8_Template, 3, 1, \"button\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"mat-menu\", null, 18)(11, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_ng_container_18_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const project_r6 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.openProjectConfigDialog(project_r6));\n    });\n    i0.ɵɵtext(12, \" Edit \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_ng_container_18_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const project_r6 = restoredCtx.$implicit;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.handleDeleteProject(project_r6));\n    });\n    i0.ɵɵtext(14, \" Delete \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"mat-card-content\")(16, \"p\", 19);\n    i0.ɵɵtemplate(17, DashboardComponent_ng_container_18_ng_template_17_Template, 1, 0, \"ng-template\", 20);\n    i0.ɵɵtemplate(18, DashboardComponent_ng_container_18_ng_template_18_Template, 1, 0, \"ng-template\", 21);\n    i0.ɵɵtemplate(19, DashboardComponent_ng_container_18_ng_template_19_Template, 1, 1, \"ng-template\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"p\", 19);\n    i0.ɵɵtemplate(21, DashboardComponent_ng_container_18_ng_template_21_Template, 1, 0, \"ng-template\", 20);\n    i0.ɵɵtemplate(22, DashboardComponent_ng_container_18_ng_template_22_Template, 1, 0, \"ng-template\", 21);\n    i0.ɵɵtemplate(23, DashboardComponent_ng_container_18_ng_template_23_Template, 1, 1, \"ng-template\", 22);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const project_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", \"Open \" + project_r6.name);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(project_r6.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.user && ctx_r3.user.role === ctx_r3.Role.TEACHER);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngPlural\", project_r6.members.length);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngPlural\", project_r6.boards.length);\n  }\n}\nexport class DashboardComponent {\n  constructor(userService, boardService, router, dialog, projectService) {\n    this.userService = userService;\n    this.boardService = boardService;\n    this.router = router;\n    this.dialog = dialog;\n    this.projectService = projectService;\n    this.isLoading = true;\n    this.yourProjects = [];\n    this.Role = Role;\n    this.createBoard = (board, selectedProjectID) => {\n      var _a;\n      this.boardService.create(board).then(_ => {\n        const view = board.defaultView ? board.defaultView.toLowerCase() : '';\n        this.router.navigate([`project/${board.projectID}/board/${board.boardID}/${view}`]);\n      });\n      const projectBoards = (_a = this.yourProjects.find(project => project.projectID == selectedProjectID)) === null || _a === void 0 ? void 0 : _a.boards;\n      if (projectBoards) {\n        this.projectService.update(selectedProjectID, {\n          boards: [...projectBoards, board.boardID]\n        });\n      }\n    };\n    this.createProject = project => {\n      this.projectService.create(project).then(_ => {\n        this.router.navigate(['project/' + project.projectID]);\n      });\n    };\n  }\n  ngOnInit() {\n    this.user = this.userService.user;\n    this.getUsersProjects(this.user.userID).then(() => this.isLoading = false);\n  }\n  getUsersProjects(id) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const projects = yield _this.projectService.getByUserID(id);\n      _this.yourProjects = projects;\n    })();\n  }\n  handleProjectClick(projectID) {\n    this.router.navigate(['project/' + projectID]);\n  }\n  handleDeleteProject(project) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.dialog.open(ConfirmModalComponent, {\n        width: '500px',\n        data: {\n          title: 'Confirmation',\n          message: 'This will permanently delete this project and all related content. Are you sure you want to do this?',\n          handleConfirm: function () {\n            var _ref = _asyncToGenerator(function* () {\n              const deletedProject = yield _this2.projectService.remove(project.projectID);\n              if (deletedProject) {\n                yield _this2.getUsersProjects(_this2.user.userID);\n              }\n            });\n            return function handleConfirm() {\n              return _ref.apply(this, arguments);\n            };\n          }()\n        }\n      });\n    })();\n  }\n  openCreateBoardDialog() {\n    this.dialog.open(AddBoardModalComponent, {\n      width: '700px',\n      data: {\n        user: this.user,\n        createBoard: this.createBoard,\n        projects: this.yourProjects\n      }\n    });\n  }\n  openCreateProjectDialog() {\n    this.dialog.open(AddProjectModalComponent, {\n      width: '700px',\n      data: {\n        user: this.user,\n        createProject: this.createProject\n      }\n    });\n  }\n  openJoinProjectDialog() {\n    this.dialog.open(JoinProjectModalComponent, {\n      width: '700px',\n      data: {\n        user: this.user\n      }\n    });\n  }\n  openProjectConfigDialog(project) {\n    this.dialog.open(ProjectConfigurationModalComponent, {\n      maxWidth: 1280,\n      width: '700px',\n      data: {\n        project: project,\n        user: this.user\n      }\n    }).afterClosed().subscribe(p => {\n      this.yourProjects = this.yourProjects.filter(yp => yp.projectID !== p.projectID);\n      this.yourProjects.push(p);\n    });\n  }\n}\nDashboardComponent.ɵfac = function DashboardComponent_Factory(t) {\n  return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.BoardService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.MatDialog), i0.ɵɵdirectiveInject(i5.ProjectService));\n};\nDashboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DashboardComponent,\n  selectors: [[\"app-dashboard\"]],\n  decls: 19,\n  vars: 5,\n  consts: [[1, \"app\"], [3, \"user\", \"showSignOut\"], [2, \"flex\", \"1 1 auto\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Create Project or Board\", 3, \"matMenuTriggerFor\", 4, \"ngIf\"], [\"addMenu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"mat-menu-item\", \"\", 3, \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Join Project\", 3, \"click\"], [1, \"content\"], [1, \"mat-title\", \"heading\"], [1, \"cards\"], [4, \"ngFor\", \"ngForOf\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Create Project or Board\", 3, \"matMenuTriggerFor\"], [\"role\", \"button\", \"tabindex\", \"0\", 1, \"card\", 3, \"click\", \"keyup.enter\"], [2, \"display\", \"flex\", \"flex-direction\", \"row\", \"align-items\", \"center\"], [1, \"title\", \"accent\"], [\"color\", \"accent\"], [\"mat-icon-button\", \"\", \"style\", \"margin:0; padding:0;line-height: inherit;height: inherit;right: 0;position: absolute;\", \"matTooltip\", \"Project Options\", 3, \"matMenuTriggerFor\", \"click\", 4, \"ngIf\"], [\"projectOptions\", \"matMenu\"], [3, \"ngPlural\"], [\"ngPluralCase\", \"=0\"], [\"ngPluralCase\", \"=1\"], [\"ngPluralCase\", \"other\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Project Options\", 2, \"margin\", \"0\", \"padding\", \"0\", \"line-height\", \"inherit\", \"height\", \"inherit\", \"right\", \"0\", \"position\", \"absolute\", 3, \"matMenuTriggerFor\", \"click\"]],\n  template: function DashboardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"app-toolbar\", 1)(2, \"span\");\n      i0.ɵɵtext(3, \"Common Knowledge Board\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"span\", 2);\n      i0.ɵɵtemplate(5, DashboardComponent_button_5_Template, 3, 1, \"button\", 3);\n      i0.ɵɵelementStart(6, \"mat-menu\", null, 4)(8, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_8_listener() {\n        return ctx.openCreateProjectDialog();\n      });\n      i0.ɵɵtext(9, \" Create Project \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, DashboardComponent_button_10_Template, 2, 0, \"button\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_11_listener() {\n        return ctx.openJoinProjectDialog();\n      });\n      i0.ɵɵelementStart(12, \"mat-icon\");\n      i0.ɵɵtext(13, \"group_add\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"div\", 8)(15, \"h3\", 9);\n      i0.ɵɵtext(16, \"My Projects\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 10);\n      i0.ɵɵtemplate(18, DashboardComponent_ng_container_18_Template, 24, 5, \"ng-container\", 11);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"user\", ctx.user)(\"showSignOut\", true);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.user && ctx.user.role == ctx.Role.TEACHER);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.yourProjects.length > 0);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.yourProjects);\n    }\n  },\n  styles: [\"app-toolbar[_ngcontent-%COMP%] {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  z-index: 1;\\n}\\n\\n.content[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 56px;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  overflow: auto;\\n  padding: 1.5em;\\n}\\n@media (min-width: 600px) {\\n  .content[_ngcontent-%COMP%] {\\n    top: 64px;\\n  }\\n}\\n\\n.heading[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 0.5em;\\n  margin-bottom: 1em;\\n}\\n.heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  margin-bottom: 0;\\n}\\n\\n.title[_ngcontent-%COMP%] {\\n  font-size: 1rem;\\n  margin-bottom: 16px;\\n  line-height: 1.5;\\n  display: flex;\\n  align-items: flex-start;\\n  gap: 0.25em;\\n}\\n\\n.cards[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-gap: 1em;\\n  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  min-height: 100px;\\n  cursor: pointer;\\n}\\n.card[_ngcontent-%COMP%]:hover {\\n  box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 1px 14px 0px rgba(0, 0, 0, 0.12);\\n}\\n\\n.mat-card[_ngcontent-%COMP%] {\\n  padding: 16px 36px 16px 16px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9zdHlsZS9sYXlvdXQvX2Rhc2hib2FyZC5zY3NzIiwid2VicGFjazovLy4vc3JjL2FwcC9jb21wb25lbnRzL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi9ub2RlX21vZHVsZXMvQG1hdGVyaWFsL3RoZW1lL19jc3Muc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTtFQUNFLGVBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxVQUFBO0FDRkY7O0FES0E7RUFDRSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxjQUFBO0VBQ0EsY0FBQTtBQ0ZGO0FESUU7RUFURjtJQVVJLFNBQUE7RUNERjtBQUNGOztBRElBO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsVUFBQTtFQUNBLGtCQUFBO0FDREY7QURHRTtFQUNFLGdCQUFBO0FDREo7O0FES0E7RUFDRSxlQUFBO0VBQ0EsbUJBQUE7RUFDQSxnQkFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLFdBQUE7QUNGRjs7QURLQTtFQUNFLGFBQUE7RUFDQSxhQUFBO0VBQ0EsNERBQUE7QUNGRjs7QURLQTtFQUNFLGlCQUFBO0VBQ0EsZUFBQTtBQ0ZGO0FESUU7RUV1QkUsMEhBQUE7QUR4Qko7O0FETUE7RUFDRSw0QkFBQTtBQ0hGIiwic291cmNlc0NvbnRlbnQiOlsiQHVzZSAnQGFuZ3VsYXIvbWF0ZXJpYWwnIGFzIG1hdDtcbkB1c2UgJy4uLy4uL3N0eWxlL2Jhc2UnIGFzICo7XG5cbmFwcC10b29sYmFyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB6LWluZGV4OiAxO1xufVxuXG4uY29udGVudCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1NnB4O1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xuICBvdmVyZmxvdzogYXV0bztcbiAgcGFkZGluZzogMS41ZW07XG5cbiAgQG1lZGlhIChtaW4td2lkdGg6IGJyZWFrcG9pbnQoJ3NtJywgJ21pbicpKSB7XG4gICAgdG9wOiA2NHB4O1xuICB9XG59XG5cbi5oZWFkaW5nIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZ2FwOiAwLjVlbTtcbiAgbWFyZ2luLWJvdHRvbTogMWVtO1xuXG4gIGgzIHtcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xuICB9XG59XG5cbi50aXRsZSB7XG4gIGZvbnQtc2l6ZTogMXJlbTtcbiAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gIGdhcDogMC4yNWVtO1xufVxuXG4uY2FyZHMge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLWdhcDogMWVtO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyMjBweCwgMWZyKSk7XG59XG5cbi5jYXJkIHtcbiAgbWluLWhlaWdodDogMTAwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcblxuICAmOmhvdmVyIHtcbiAgICBAaW5jbHVkZSBtYXQuZWxldmF0aW9uKDUpO1xuICB9XG59XG5cbi5tYXQtY2FyZCB7XG4gIHBhZGRpbmc6IDE2cHggMzZweCAxNnB4IDE2cHg7XG59XG4iLCJhcHAtdG9vbGJhciB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgei1pbmRleDogMTtcbn1cblxuLmNvbnRlbnQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNTZweDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIHBhZGRpbmc6IDEuNWVtO1xufVxuQG1lZGlhIChtaW4td2lkdGg6IDYwMHB4KSB7XG4gIC5jb250ZW50IHtcbiAgICB0b3A6IDY0cHg7XG4gIH1cbn1cblxuLmhlYWRpbmcge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDAuNWVtO1xuICBtYXJnaW4tYm90dG9tOiAxZW07XG59XG4uaGVhZGluZyBoMyB7XG4gIG1hcmdpbi1ib3R0b206IDA7XG59XG5cbi50aXRsZSB7XG4gIGZvbnQtc2l6ZTogMXJlbTtcbiAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gIGdhcDogMC4yNWVtO1xufVxuXG4uY2FyZHMge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLWdhcDogMWVtO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyMjBweCwgMWZyKSk7XG59XG5cbi5jYXJkIHtcbiAgbWluLWhlaWdodDogMTAwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbi5jYXJkOmhvdmVyIHtcbiAgYm94LXNoYWRvdzogMHB4IDNweCA1cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMiksIDBweCA1cHggOHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTQpLCAwcHggMXB4IDE0cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xMik7XG59XG5cbi5tYXQtY2FyZCB7XG4gIHBhZGRpbmc6IDE2cHggMzZweCAxNnB4IDE2cHg7XG59IiwiLy9cbi8vIENvcHlyaWdodCAyMDIwIEdvb2dsZSBJbmMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cbi8vXG5cbkB1c2UgJ3Nhc3M6bGlzdCc7XG5AdXNlICdzYXNzOm1hcCc7XG5AdXNlICdzYXNzOm1ldGEnO1xuQHVzZSAnLi9nc3MnO1xuXG4vLy8gV2hlbiB0cnVlLCBhZGQgYW4gYWRkaXRpb25hbCBwcm9wZXJ0eS92YWx1ZSBkZWNsYXJhdGlvbiBiZWZvcmUgZGVjbGFyYXRpb25zXG4vLy8gdGhhdCB1c2UgYWR2YW5jZWQgZmVhdHVyZXMgc3VjaCBhcyBjdXN0b20gcHJvcGVydGllcyBvciBDU1MgZnVuY3Rpb25zLiBUaGlzXG4vLy8gYWRkcyBmYWxsYmFjayBzdXBwb3J0IGZvciBvbGRlciBicm93c2VycyBzdWNoIGFzIElFMTEgdGhhdCBkbyBub3Qgc3VwcG9ydFxuLy8vIHRoZXNlIGZlYXR1cmVzIGF0IHRoZSBjb3N0IG9mIGFkZGl0aW9uYWwgQ1NTLiBTZXQgdGhpcyB2YXJpYWJsZSB0byBmYWxzZSB0b1xuLy8vIGRpc2FibGUgZ2VuZXJhdGluZyBmYWxsYmFjayBkZWNsYXJhdGlvbnMuXG4kZW5hYmxlLWZhbGxiYWNrLWRlY2xhcmF0aW9uczogdHJ1ZSAhZGVmYXVsdDtcblxuLy8vIFdyaXRlcyBhIENTUyBwcm9wZXJ0eS92YWx1ZSBkZWNsYXJhdGlvbi4gVGhpcyBtaXhpbiBpcyB1c2VkIHRocm91Z2hvdXQgdGhlXG4vLy8gdGhlbWUgcGFja2FnZSBmb3IgY29uc2lzdGVuY3kgZm9yIGR5bmFtaWNhbGx5IHNldHRpbmcgQ1NTIHByb3BlcnR5IHZhbHVlcy5cbi8vL1xuLy8vIFRoaXMgbWl4aW4gbWF5IG9wdGlvbmFsbHkgdGFrZSBhIGZhbGxiYWNrIHZhbHVlLiBGb3IgYWR2YW5jZWQgZmVhdHVyZXMgc3VjaFxuLy8vIGFzIGN1c3RvbSBwcm9wZXJ0aWVzIG9yIENTUyBmdW5jdGlvbnMgbGlrZSBtaW4gYW5kIG1heCwgYSBmYWxsYmFjayB2YWx1ZSBpc1xuLy8vIHJlY29tbWVuZGVkIHRvIHN1cHBvcnQgb2xkZXIgYnJvd3NlcnMuXG4vLy9cbi8vLyBAcGFyYW0ge1N0cmluZ30gJHByb3BlcnR5IC0gVGhlIENTUyBwcm9wZXJ0eSBvZiB0aGUgZGVjbGFyYXRpb24uXG4vLy8gQHBhcmFtIHsqfSAkdmFsdWUgLSBUaGUgdmFsdWUgb2YgdGhlIENTUyBkZWNsYXJhdGlvbi4gVGhlIHZhbHVlIHNob3VsZCBiZVxuLy8vICAgICByZXNvbHZlZCBieSBvdGhlciB0aGVtZSBmdW5jdGlvbnMgZmlyc3QgKGkuZS4gY3VzdG9tIHByb3BlcnR5IE1hcHMgYW5kXG4vLy8gICAgIE1hdGVyaWFsIHRoZW1lIGtleXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBtaXhpbikuIElmIHRoZSB2YWx1ZSBpc1xuLy8vICAgICBudWxsLCBubyBkZWNsYXJhdGlvbnMgd2lsbCBiZSBlbWl0dGVkLlxuLy8vIEBwYXJhbSB7Kn0gJGZhbGxiYWNrIC0gQW4gb3B0aW9uYWwgZmFsbGJhY2sgdmFsdWUgZm9yIG9sZGVyIGJyb3dzZXJzLiBJZlxuLy8vICAgICBwcm92aWRlZCwgYSBzZWNvbmQgcHJvcGVydHkvdmFsdWUgZGVjbGFyYXRpb24gd2lsbCBiZSBhZGRlZCBiZWZvcmUgdGhlXG4vLy8gICAgIG1haW4gcHJvcGVydHkvdmFsdWUgZGVjbGFyYXRpb24uXG4vLy8gQHBhcmFtIHtNYXB9ICRnc3MgLSBBbiBvcHRpb25hbCBNYXAgb2YgR1NTIGFubm90YXRpb25zIHRvIGFkZC5cbi8vLyBAcGFyYW0ge0Jvb2x9ICRpbXBvcnRhbnQgLSBJZiB0cnVlLCBhZGQgYCFpbXBvcnRhbnRgIHRvIHRoZSBkZWNsYXJhdGlvbi5cbkBtaXhpbiBkZWNsYXJhdGlvbihcbiAgJHByb3BlcnR5LFxuICAkdmFsdWUsXG4gICRmYWxsYmFjay12YWx1ZTogbnVsbCxcbiAgJGdzczogKCksXG4gICRpbXBvcnRhbnQ6IGZhbHNlXG4pIHtcbiAgLy8gTm9ybWFsbHkgc2V0dGluZyBhIG51bGwgdmFsdWUgdG8gYSBwcm9wZXJ0eSB3aWxsIG5vdCBlbWl0IENTUywgc28gbWl4aW5zXG4gIC8vIHdvdWxkbid0IG5lZWQgdG8gY2hlY2sgdGhpcy4gSG93ZXZlciwgU2FzcyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoZVxuICAvLyBpbnRlcnBvbGF0ZWQgcHJvcGVydHkgaXMgYSBjdXN0b20gcHJvcGVydHkuXG4gIEBpZiAkdmFsdWUgIT0gbnVsbCB7XG4gICAgJGltcG9ydGFudC1ydWxlOiBpZigkaW1wb3J0YW50LCAnICFpbXBvcnRhbnQnLCAnJyk7XG5cbiAgICBAaWYgJGZhbGxiYWNrLXZhbHVlIGFuZCAkZW5hYmxlLWZhbGxiYWNrLWRlY2xhcmF0aW9ucyB7XG4gICAgICBAaW5jbHVkZSBnc3MuYW5ub3RhdGUoJGdzcyk7XG4gICAgICAjeyRwcm9wZXJ0eX06ICN7JGZhbGxiYWNrLXZhbHVlfSAjeyRpbXBvcnRhbnQtcnVsZX07XG5cbiAgICAgIC8vIEFkZCBAYWx0ZXJuYXRlIHRvIGFubm90YXRpb25zLlxuICAgICAgJGdzczogbWFwLm1lcmdlKFxuICAgICAgICAkZ3NzLFxuICAgICAgICAoXG4gICAgICAgICAgYWx0ZXJuYXRlOiB0cnVlLFxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIEBpbmNsdWRlIGdzcy5hbm5vdGF0ZSgkZ3NzKTtcbiAgICAjeyRwcm9wZXJ0eX06ICN7JHZhbHVlfSN7JGltcG9ydGFudC1ydWxlfTtcbiAgfVxufVxuXG4vLy8gVW5wYWNrcyBzaG9ydGhhbmQgdmFsdWVzIGZvciBDU1MgcHJvcGVydGllcyAoaS5lLiBsaXN0cyBvZiAxLTMgdmFsdWVzKS5cbi8vLyBJZiBhIGxpc3Qgb2YgNCB2YWx1ZXMgaXMgZ2l2ZW4sIGl0IGlzIHJldHVybmVkIGFzLWlzLlxuLy8vXG4vLy8gRXhhbXBsZXM6XG4vLy9cbi8vLyB1bnBhY2stdmFsdWUoNHB4KSA9PiA0cHggNHB4IDRweCA0cHhcbi8vLyB1bnBhY2stdmFsdWUoNHB4IDJweCkgPT4gNHB4IDJweCA0cHggMnB4XG4vLy8gdW5wYWNrLXZhbHVlKDRweCAycHggMnB4KSA9PiA0cHggMnB4IDJweCAycHhcbi8vLyB1bnBhY2stdmFsdWUoNHB4IDJweCAwIDJweCkgPT4gNHB4IDJweCAwIDJweFxuLy8vXG4vLy8gQHBhcmFtIHtOdW1iZXIgfCBNYXAgfCBMaXN0fSAkdmFsdWUgLSBMaXN0IG9mIDEgdG8gNCB2YWx1ZSBudW1iZXJzLlxuLy8vIEByZXR1cm4ge0xpc3R9IGEgTGlzdCBvZiA0IHZhbHVlIG51bWJlcnMuXG5AZnVuY3Rpb24gdW5wYWNrLXZhbHVlKCR2YWx1ZSkge1xuICBAaWYgbWV0YS50eXBlLW9mKCR2YWx1ZSkgPT0gJ21hcCcgb3IgbGlzdC5sZW5ndGgoJHZhbHVlKSA9PSAxIHtcbiAgICBAcmV0dXJuICR2YWx1ZSAkdmFsdWUgJHZhbHVlICR2YWx1ZTtcbiAgfSBAZWxzZSBpZiBsaXN0Lmxlbmd0aCgkdmFsdWUpID09IDQge1xuICAgIEByZXR1cm4gJHZhbHVlO1xuICB9IEBlbHNlIGlmIGxpc3QubGVuZ3RoKCR2YWx1ZSkgPT0gMyB7XG4gICAgQHJldHVybiBsaXN0Lm50aCgkdmFsdWUsIDEpIGxpc3QubnRoKCR2YWx1ZSwgMikgbGlzdC5udGgoJHZhbHVlLCAzKVxuICAgICAgbGlzdC5udGgoJHZhbHVlLCAyKTtcbiAgfSBAZWxzZSBpZiBsaXN0Lmxlbmd0aCgkdmFsdWUpID09IDIge1xuICAgIEByZXR1cm4gbGlzdC5udGgoJHZhbHVlLCAxKSBsaXN0Lm50aCgkdmFsdWUsIDIpIGxpc3QubnRoKCR2YWx1ZSwgMSlcbiAgICAgIGxpc3QubnRoKCR2YWx1ZSwgMik7XG4gIH1cblxuICBAZXJyb3IgXCJJbnZhbGlkIENTUyBwcm9wZXJ0eSB2YWx1ZTogJyN7JHZhbHVlfScgaXMgbW9yZSB0aGFuIDQgdmFsdWVzXCI7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["Role","AddBoardModalComponent","AddProjectModalComponent","JoinProjectModalComponent","ProjectConfigurationModalComponent","ConfirmModalComponent","i0","$event","DashboardComponent","constructor","userService","boardService","router","dialog","projectService","board","selectedProjectID","create","then","_","view","defaultView","toLowerCase","navigate","projectID","boardID","projectBoards","yourProjects","find","project","boards","update","ngOnInit","user","getUsersProjects","userID","isLoading","id","projects","getByUserID","handleProjectClick","handleDeleteProject","open","width","data","title","message","handleConfirm","deletedProject","remove","openCreateBoardDialog","createBoard","openCreateProjectDialog","createProject","openJoinProjectDialog","openProjectConfigDialog","maxWidth","afterClosed","subscribe","p","filter","yp","push","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/marieklinaeva/github/ck-board/frontend/src/app/components/dashboard/dashboard.component.ts","/Users/marieklinaeva/github/ck-board/frontend/src/app/components/dashboard/dashboard.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport { Board } from 'src/app/models/board';\nimport User, { AuthUser, Role } from 'src/app/models/user';\nimport { BoardService } from 'src/app/services/board.service';\nimport { UserService } from 'src/app/services/user.service';\nimport { AddBoardModalComponent } from '../add-board-modal/add-board-modal.component';\nimport { ProjectService } from 'src/app/services/project.service';\nimport { Project } from 'src/app/models/project';\nimport { AddProjectModalComponent } from '../add-project-modal/add-project-modal.component';\nimport { JoinProjectModalComponent } from '../join-project-modal/join-project-modal.component';\nimport { ProjectConfigurationModalComponent } from '../project-configuration-modal/project-configuration-modal.component';\nimport { ConfirmModalComponent } from '../confirm-modal/confirm-modal.component';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.scss'],\n})\nexport class DashboardComponent implements OnInit {\n  isLoading = true;\n\n  user: AuthUser;\n\n  yourProjects: Project[] = [];\n\n  Role: typeof Role = Role;\n\n  constructor(\n    public userService: UserService,\n    public boardService: BoardService,\n    public router: Router,\n    public dialog: MatDialog,\n    public projectService: ProjectService\n  ) {}\n\n  ngOnInit(): void {\n    this.user = this.userService.user!;\n    this.getUsersProjects(this.user.userID).then(\n      () => (this.isLoading = false)\n    );\n  }\n\n  async getUsersProjects(id: string) {\n    const projects = await this.projectService.getByUserID(id);\n    this.yourProjects = projects;\n  }\n\n  handleProjectClick(projectID: string) {\n    this.router.navigate(['project/' + projectID]);\n  }\n\n  async handleDeleteProject(project: Project) {\n    this.dialog.open(ConfirmModalComponent, {\n      width: '500px',\n      data: {\n        title: 'Confirmation',\n        message:\n          'This will permanently delete this project and all related content. Are you sure you want to do this?',\n        handleConfirm: async () => {\n          const deletedProject = await this.projectService.remove(\n            project.projectID\n          );\n          if (deletedProject) {\n            await this.getUsersProjects(this.user.userID);\n          }\n        },\n      },\n    });\n  }\n\n  openCreateBoardDialog() {\n    this.dialog.open(AddBoardModalComponent, {\n      width: '700px',\n      data: {\n        user: this.user,\n        createBoard: this.createBoard,\n        projects: this.yourProjects,\n      },\n    });\n  }\n\n  openCreateProjectDialog() {\n    this.dialog.open(AddProjectModalComponent, {\n      width: '700px',\n      data: {\n        user: this.user,\n        createProject: this.createProject,\n      },\n    });\n  }\n\n  openJoinProjectDialog() {\n    this.dialog.open(JoinProjectModalComponent, {\n      width: '700px',\n      data: {\n        user: this.user,\n      },\n    });\n  }\n\n  openProjectConfigDialog(project: Project) {\n    this.dialog\n      .open(ProjectConfigurationModalComponent, {\n        maxWidth: 1280,\n        width: '700px',\n        data: { project: project, user: this.user },\n      })\n      .afterClosed()\n      .subscribe((p: Project) => {\n        this.yourProjects = this.yourProjects.filter(\n          (yp) => yp.projectID !== p.projectID\n        );\n        this.yourProjects.push(p);\n      });\n  }\n\n  createBoard = (board: Board, selectedProjectID: string) => {\n    this.boardService.create(board).then((_) => {\n      const view = board.defaultView ? board.defaultView.toLowerCase() : '';\n      this.router.navigate([\n        `project/${board.projectID}/board/${board.boardID}/${view}`,\n      ]);\n    });\n    const projectBoards = this.yourProjects.find(\n      (project) => project.projectID == selectedProjectID\n    )?.boards;\n    if (projectBoards) {\n      this.projectService.update(selectedProjectID, {\n        boards: [...projectBoards, board.boardID],\n      });\n    }\n  };\n\n  createProject = (project: Project) => {\n    this.projectService.create(project).then((_) => {\n      this.router.navigate(['project/' + project.projectID]);\n    });\n  };\n}\n","<div class=\"app\">\n  <app-toolbar [user]=\"user\" [showSignOut]=\"true\">\n    <span>Common Knowledge Board</span>\n    <span style=\"flex: 1 1 auto\"></span>\n    <button\n      mat-icon-button\n      [matMenuTriggerFor]=\"addMenu\"\n      *ngIf=\"user && user.role == Role.TEACHER\"\n      matTooltip=\"Create Project or Board\"\n    >\n      <mat-icon>add</mat-icon>\n    </button>\n    <mat-menu #addMenu=\"matMenu\">\n      <button mat-menu-item (click)=\"openCreateProjectDialog()\">\n        Create Project\n      </button>\n      <button\n        mat-menu-item\n        (click)=\"openCreateBoardDialog()\"\n        *ngIf=\"yourProjects.length > 0\"\n      >\n        Create Board\n      </button>\n    </mat-menu>\n    <button\n      mat-icon-button\n      (click)=\"openJoinProjectDialog()\"\n      matTooltip=\"Join Project\"\n    >\n      <mat-icon>group_add</mat-icon>\n    </button>\n  </app-toolbar>\n  <div class=\"content\">\n    <h3 class=\"mat-title heading\">My Projects</h3>\n    <div class=\"cards\">\n      <ng-container *ngFor=\"let project of yourProjects\">\n        <mat-card\n          class=\"card\"\n          (click)=\"handleProjectClick(project.projectID)\"\n          (keyup.enter)=\"handleProjectClick(project.projectID)\"\n          role=\"button\"\n          tabindex=\"0\"\n          [attr.aria-label]=\"'Open ' + project.name\"\n        >\n          <div style=\"display:flex; flex-direction: row; align-items: center\" >\n            <mat-card-title class=\"title accent\">\n              <mat-icon color=\"accent\">grid_view</mat-icon>\n              <span>{{ project.name }}</span>\n              <button \n              *ngIf=\"user && user.role === Role.TEACHER\"\n              mat-icon-button\n              [matMenuTriggerFor]=\"projectOptions\"\n              style=\"margin:0; padding:0;line-height: inherit;height: inherit;right: 0;position: absolute;\"\n              matTooltip=\"Project Options\"\n              (click)=\"$event.stopPropagation();\"\n              >\n                <mat-icon >\n                  more_vert\n                </mat-icon>\n              </button>\n            </mat-card-title>\n            <mat-menu #projectOptions=\"matMenu\">\n              <button mat-menu-item (click)=\"openProjectConfigDialog(project)\">\n                Edit\n              </button>\n              <button mat-menu-item (click)=\"handleDeleteProject(project)\">\n                Delete\n              </button>\n            </mat-menu>\n          </div>\n          <mat-card-content>\n            <p [ngPlural]=\"project.members.length\">\n              <ng-template ngPluralCase=\"=0\">0 members</ng-template>\n              <ng-template ngPluralCase=\"=1\">1 member</ng-template>\n              <ng-template ngPluralCase=\"other\">{{\n                project.members.length + ' members'\n              }}</ng-template>\n            </p>\n            <p [ngPlural]=\"project.boards.length\">\n              <ng-template ngPluralCase=\"=0\">0 boards</ng-template>\n              <ng-template ngPluralCase=\"=1\">1 board</ng-template>\n              <ng-template ngPluralCase=\"other\">{{\n                project.boards.length + ' boards'\n              }}</ng-template>\n            </p>\n          </mat-card-content>\n        </mat-card>\n      </ng-container>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}