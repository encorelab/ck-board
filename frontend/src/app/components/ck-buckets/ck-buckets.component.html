<app-toolbar *ngIf="user" [user]="user">
    <span class="toolbarTitle" *ngIf="board && board.name">{{ board.name }}</span>
    <button mat-icon-button *ngIf="user.role === Role.TEACHER"
        (click)="board.scope === BoardScope.PROJECT_SHARED ? copyEmbedCode() : copyPersonalEmbedCode()"
        matTooltip="Copy embeddable URL">
        <mat-icon>file_copy</mat-icon>
    </button>
    <span style="flex: 1 1 auto"></span>
    <button navbarMenu mat-icon-button [matMenuTriggerFor]="navbarMenu">
        <mat-icon>dehaze</mat-icon>
    </button>
    <mat-menu #navbarMenu="matMenu">
        <button mat-menu-item><mat-icon>list_alt</mat-icon>List Posts</button>
        <a href="https://score.oise.utoronto.ca/" style="text-decoration:none;color:black" target="_blank">
            <button mat-menu-item style="text-decoration:none;color:black">
                <mat-icon>launch</mat-icon>
                Go to SCORE
            </button>
        </a>
        <button mat-menu-item (click)="signOut()">
            <mat-icon class="material-icons-outlined">logout</mat-icon>
            Log Out
        </button>
    </mat-menu>
</app-toolbar>
<div class="container d-flex align-items-center justify-content-center">
    <h1 mat-dialog-title><span>CK Buckets</span></h1>
    <div class="buckets">
        <h3 *ngIf="buckets.length === 0 && bucketsOnView.length === 0" style="color: grey; text-align: center">No buckets available</h3>
        <div class="bucket" *ngFor="let bucket of bucketsOnView; let idx = index">
            <div class="header">
                <h3>{{ bucket.name }}</h3>
                <button mat-icon-button (click)="removeBucketFromView(bucket, idx)"><mat-icon>close</mat-icon></button>
            </div>
            <h3 *ngIf="bucket.posts.length == 0" style="color: grey">No posts</h3>
        </div>
        <div *ngIf="bucketsOnView.length >= 0 && bucketsOnView.length < maxBucketsOnView">
            <button mat-icon-button matTooltip="Add bucket to view"
                [matMenuTriggerFor]="bucketsMenu"
                [hidden]="bucketsOnView.length >= maxBucketsOnView">
                <mat-icon class="material-icons-outlined">add</mat-icon>
            </button>
        </div>
    </div>
</div>
<mat-menu #bucketsMenu="matMenu">
    <button mat-menu-item *ngFor="let bucket of buckets; let idx = index"
        [value]="bucket" (click)="addBucketToView(bucket, idx)">
        {{ bucket.name }}
    </button>
</mat-menu>