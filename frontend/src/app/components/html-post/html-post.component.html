<mat-card
  class="bucket-card" 
  (click)="post.config.allowExpand && openPostDialog()"
  (keyup.enter)="post.config.allowExpand && openPostDialog()"
  *ngIf="exists"
  [ngStyle]="{'background-color': postColor}"
  role="button"
  tabindex="0"
  aria-label="View post details">
  <div class="titleRow">
    <div class="mat-title">{{ post.post.title }}</div>
    <button 
      mat-icon-button 
      *ngIf="post.bucketOnly" 
      (click)="movePostToBoard(post.post.postID); $event.stopPropagation()"
      style="display: inline-block;">
      <mat-icon class="material-icons-outlined">download</mat-icon>
    </button>
  </div>
    <mat-card-subtitle *ngIf="!post.config.hideAuthorName">{{ post.author }}</mat-card-subtitle>
    <mat-card-subtitle *ngIf="post.config.hideAuthorName">Anonymous</mat-card-subtitle>
    <mat-card-content>
      <mat-chip-list>
        <mat-chip [ngStyle]="{'background-color': tag.color, 'color': 'black'}" selected 
          *ngFor="let tag of post.post.tags">
          {{ tag.name }}
          <mat-icon class="cancel" (click)="$event.stopPropagation(); removeTag(tag)">cancel</mat-icon>
        </mat-chip>
        <mat-chip [matMenuTriggerFor]="tagMenu" (click)="$event.stopPropagation();" style="background-color: #9d9ad9">
          Add Tag +
        </mat-chip>
        <mat-menu #tagMenu="matMenu">
          <div mat-menu-item *ngIf="availableTags.length == 0">
            No tags available.
          </div>
          <button mat-menu-item (click)="addTag(tag)" *ngFor="let tag of availableTags">
            {{ tag.name }}
          </button>
        </mat-menu>
      </mat-chip-list>
      <p class="content">{{ post.post.desc }}</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="handleLike($event)">
        <mat-icon *ngIf="isLiked">thumb_up</mat-icon>
        <i class="material-icons-outlined" *ngIf="!isLiked">thumb_up</i>
        {{ post.likes.length }}
      </button>
      <button mat-button>
        <mat-icon>comment</mat-icon>
        {{ post.comments }}
      </button>
      <!-- <button mat-button [matMenuTriggerFor]="tagMenu" (click)="$event.stopPropagation();">
        <mat-icon>tag</mat-icon>
        {{ post.post.tags.length }}
      </button> -->
    </mat-card-actions>
</mat-card>
